sap.ui.define(["sap/ui/generic/app/util/MessageUtil","sap/base/Log"],function(G,L){"use strict";var l=L.getLogger("sap.suite.ui.generic.template.lib.MessageUtils");function h(o,c,S,e,p,C){p=p||{};var E=G.parseErrorResponse(e);var m=E.messageText;var M;var b=false;var a=false;var d=c&&c.getOwnerComponent();var r=p.resourceBundle||d.getModel("i18n").getResourceBundle();var f=p.navigationController||S.oNavigationController;var g=p.model||d.getModel();l.debug("handleError has been called with operation "+o+" and HTTP response status code "+E.httpStatusCode);var i=C&&C[E.httpStatusCode];if(i){i(E.httpStatusCode);}switch(E.httpStatusCode){case"400":switch(o){case G.operations.modifyEntity:break;case G.operations.callAction:m=r.getText("ST_GENERIC_BAD_REQUEST_ACTION");break;case G.operations.deleteEntity:m=r.getText("ST_GENERIC_BAD_REQUEST_DELETE");break;case G.operations.editEntity:m=r.getText("ST_GENERIC_BAD_REQUEST_EDIT");break;case G.operations.saveEntity:case G.operations.activateDraftEntity:if(S&&S.oTemplateCapabilities&&S.oTemplateCapabilities.oMessageButtonHelper&&S.oTemplateCapabilities.oMessageButtonHelper.showMessagePopover){S.oTemplateCapabilities.oMessageButtonHelper.showMessagePopover();a=true;}else{l.info("A MessageButtonHelper class instance could not be found as one of the services' template capabilities.");}break;default:m=r.getText("ST_GENERIC_BAD_REQUEST");break;}break;case"401":b=true;m=r.getText("ST_GENERIC_ERROR_AUTHENTICATED_FAILED");M=r.getText("ST_GENERIC_ERROR_AUTHENTICATED_FAILED_DESC");break;case"403":switch(o){case G.operations.callAction:m=r.getText("ST_GENERIC_ERROR_NOT_AUTORIZED_ACTION");break;case G.operations.deleteEntity:m=r.getText("ST_GENERIC_ERROR_NOT_AUTORIZED_DELETE");break;case G.operations.editEntity:m=r.getText("ST_GENERIC_ERROR_NOT_AUTORIZED_EDIT");break;default:m=r.getText("ST_GENERIC_ERROR_NOT_AUTORIZED");M=r.getText("ST_GENERIC_ERROR_NOT_AUTORIZED_DESC");b=true;break;}break;case"404":switch(o){case G.operations.callAction:m=r.getText("ST_GENERIC_BAD_REQUEST_ACTION");break;default:m=r.getText("ST_GENERIC_BAD_REQUEST");break;}break;case"409":case"412":if(o===G.operations.activateDraftEntity&&e.response&&e.response.headers&&e.response.headers["preference-applied"]==="handling=strict"){return;}break;case"500":case"501":case"502":case"503":case"504":case"505":b=true;switch(o){case G.operations.callAction:m=r.getText("ST_GENERIC_ERROR_SYSTEM_UNAVAILABLE_FOR_ACTION");break;default:m=r.getText("ST_GENERIC_ERROR_SYSTEM_UNAVAILABLE");break;}M=r.getText("ST_GENERIC_ERROR_SYSTEM_UNAVAILABLE_DESC");break;case undefined:b=false;a=true;break;default:b=true;m=r.getText("ST_GENERIC_ERROR_SYSTEM_UNAVAILABLE");M=r.getText("ST_GENERIC_ERROR_SYSTEM_UNAVAILABLE_DESC");break;}if(b){var v;if(d){var t=d.getModel("_templPriv");v=t.getProperty("/generic/viewLevel");}f.navigateToMessagePage({title:r.getText("ST_GENERIC_ERROR_TITLE"),text:m,description:M,icon:"sap-icon://message-error",viewLevel:v});}else{if(!E.containsTransientMessage&&!a){G.addTransientErrorMessage(m,M,g);}}}function n(c,m){var i=c.getPositionableControlId(m.controlIds);c.focusControl(i);}function N(c,e){var m=e.getParameter("item");var M=m.getBindingContext("msg").getObject();n(c,M);}function s(f,S){var m=sap.ui.getCore().getMessageManager().getMessageModel().getData();var M=m.some(function(o){return o.persistent;});if(!M){S.oApplication.showMessageToast(f);}}return{operations:G.operations,handleTransientMessages:G.handleTransientMessages,handleError:h,navigateFromMessageTitleEvent:N,removeTransientMessages:G.removeTransientMessages,showSuccessMessageIfRequired:s};});
