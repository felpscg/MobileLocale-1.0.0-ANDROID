// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/f/GridContainerItemLayoutData","sap/m/library","sap/ui/core/XMLComposite","sap/ushell/resources","sap/ushell/utils"],function(G,l,X,r,u){"use strict";var T=l.TileSizeBehavior;var S=X.extend("sap.ushell.ui.launchpad.Section",{metadata:{library:"sap.ushell",properties:{editable:{type:"boolean",group:"Misc",defaultValue:false},enableAddButton:{type:"boolean",group:"Behavior",defaultValue:true},enableDeleteButton:{type:"boolean",group:"Behavior",defaultValue:true},enableGridBreakpoints:{type:"boolean",grop:"Appearance",defaultValue:false},enableResetButton:{type:"boolean",group:"Behavior",defaultValue:true},enableShowHideButton:{type:"boolean",group:"Behavior",defaultValue:true},enableWidgetReordering:{type:"boolean",group:"Behavior",defaultValue:false},noWidgetsText:{type:"string",group:"Appearance",defaultValue:r.i18n.getText("Section.NoWidgetsText")},title:{type:"string",group:"Appearance",defaultValue:r.i18n.getText("Section.DefaultTitle")},showNoWidgetsText:{type:"boolean",group:"Behavior",defaultValue:false},showSection:{type:"boolean",group:"Misc",defaultValue:true},sizeBehavior:{type:"sap.m.TileSizeBehavior",group:"Misc",defaultValue:T.Responsive}},defaultAggregation:"widgets",aggregations:{widgets:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"--innerGrid",aggregation:"items"},dnd:true}},events:{"add":{},"delete":{},"reset":{},"titleChange":{},"widgetDrop":{parameters:{draggedControl:{type:"sap.ui.core.Control"},droppedControl:{type:"sap.ui.core.Control"},dropPosition:{type:"string"}}}}},resourceModel:r.i18nModel});S.prototype.init=function(){this.oVBox=this.byId("content");this.byId("innerGrid").addEventDelegate({onAfterRendering:function(){this.oVBox.toggleStyleClass("sapUshellSectionNoWidgets",!this.getWidgets().length);}.bind(this)});};S.prototype.setEditable=function(v){this.setProperty("editable",!!v);this.oVBox.toggleStyleClass("sapUshellSectionEdit",!!v);};S.prototype.setShowSection=function(v){this.setProperty("showSection",!!v);this.oVBox.toggleStyleClass("sapUshellSectionHidden",!v);};S.prototype._reorderWidgets=function(i){this.fireWidgetDrop(i.getParameters());};S.prototype._getDropIndicatorSize=function(w){return this._getWidgetLayoutData(w);};S.prototype.addAggregation=function(a,o){X.prototype.addAggregation.apply(this,arguments);if(a==="widgets"){this._addWidgetLayoutData(o);}return this;};S.prototype.insertAggregation=function(a,o,i){X.prototype.insertAggregation.apply(this,arguments);if(a==="widgets"){this._addWidgetLayoutData(o);}return this;};S.prototype._getWidgetLayoutData=function(w){var L={rows:2,columns:2};if(w.isA("sap.ui.integration.widgets.Card")){var c=w.getManifest(),C=u.getMember(c,"sap|flp.rows")||3,s=u.getMember(c,"sap|flp.columns")||3;L={rows:parseInt(C,10),columns:parseInt(s,10)};}else if(w.isA("sap.f.Card")){L={columns:4};}return L;};S.prototype._addWidgetLayoutData=function(w){if(!w.getLayoutData()){var L=this._getWidgetLayoutData(w);w.setLayoutData(new G(L));}};return S;});
