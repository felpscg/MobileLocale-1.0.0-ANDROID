// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/thirdparty/jquery","sap/base/util/UriParameters"],function(q,U){"use strict";var O={name:"core-ext-light",count:4,debugName:"core-ext-light",path:"sap/fiori/"};function c(C,o){var D=new q.Deferred();C.componentData=o;C.async=true;sap.ui.component(C).then(function(m){D.resolve(m);},function(E){D.reject(E);});return D.promise();}function s(S){var A=(S&&S.hasOwnProperty("amendedLoading"))?S.amendedLoading:true;return A;}function a(A){var L=true;if(A.hasOwnProperty("loadCoreExt")){L=A.loadCoreExt;}return L;}function b(A,S,m){var L=true;if(A.hasOwnProperty("loadDefaultDependencies")){L=A.loadDefaultDependencies;}if(S&&S.hasOwnProperty("loadDefaultDependencies")){L=L&&S.loadDefaultDependencies;}L=L&&m;return L;}function d(P){var S=P.semanticObject||null;var A=P.action||null;if(!S||!A){return null;}return"application-"+S+"-"+A+"-component";}function u(m){return m&&m.indexOf("?")>=0;}function r(m){if(!m){return m;}var I=m.indexOf("?");if(I>=0){return m.slice(0,I);}return m;}function i(){return q.sap.isDeclared("sap.fiori.core",true)||q.sap.isDeclared("sap.fiori.core-ext-light",true);}function l(A,E,m,n,C){var o="The issue is most likely caused by application "+A,t="Failed to load UI5 component with properties: '"+C+"'.";if(n){t+=" Error likely caused by:\n"+n;}else{t+=" Error: '"+E+"'";}if(m==="parsererror"){o+=", as one or more of its resources could not be parsed";}o+=". Please create a support incident and assign it to the support component of the respective application.";q.sap.log.error(o,t,A);}function g(m){var P=new U(m||window.location.href).mParams,x=P["sap-xapp-state"],R;delete P["sap-xapp-state"];R={startupParameters:P};if(x){R["sap-xapp-state"]=x;}return R;}function e(A,m){if(!Array.isArray(m)){return;}m.forEach(function(M){var S=String.prototype.toLowerCase.call(M.severity||"");S=["trace","debug","info","warning","error","fatal"].indexOf(S)!==-1?S:"error";q.sap.log[S](M.text,M.details,A);});}function p(C){var B,o={name:"CoreResourcesComplement"};if(v(C)){B=C;}else{B=O;}if(window["sap-ui-debug"]===true){o.aResources=[B.path+B.debugName+".js"];}else{o.aResources=f(B.name,B.path,B.count);}return o;}function f(B,P,R){var m=arguments[3]||[],n=P;if(typeof B!=="string"||typeof n!=="string"||typeof R!=="number"){q.sap.log.error("Ui5ComponentLoader: _buildBundleResourcesArray called with invalid arguments");return null;}if(n.substr(-1)!=="/"){n+="/";}if(R===1){m.push(n+B+".js");}if(m.length>=R){return m;}m.push(n+B+"-"+m.length+".js");return f(B,n,R,m);}function v(C){var m=true;if(!C){return false;}if(!C.name||typeof C.name!=="string"){q.sap.log.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'name' property");m=false;}if(!C.count||typeof C.count!=="number"){q.sap.log.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'count' property");m=false;}if(!C.debugName||typeof C.debugName!=="string"){q.sap.log.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'debugName' property");m=false;}if(!C.path||typeof C.path!=="string"){q.sap.log.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'path' property");m=false;}return m;}function h(B){if(!B||!Array.isArray(B.aResources)||!B.name){q.sap.log.error("Ui5ComponentLoader: loadBundle called with invalid arguments");return null;}var P=[],D=new q.Deferred();B.aResources.forEach(function(R){P.push(q.sap._loadJSResourceAsync(R));});Promise.all(P).then(function(){D.resolve();}).catch(function(){q.sap.log.error("Ui5ComponentLoader: failed to load bundle: "+B.name);D.reject();});return D.promise();}function j(A,L,w,o,m,C,n,t){var x=q.extend(true,{},o);if(!x.asyncHints){x.asyncHints=L?{"libs":["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"]}:{};}if(A){x.asyncHints.preloadBundles=x.asyncHints.preloadBundles||[];x.asyncHints.preloadBundles=x.asyncHints.preloadBundles.concat(t.aResources);}if(w){x.asyncHints.waitFor=w;}if(!x.name){x.name=m;}if(C){x.url=r(C);}if(n){x.id=n;}return x;}function k(B,C,A,t){var o=q.extend(true,{startupParameters:{}},B);if(A){o.config=A;}if(t){o.technicalParameters=t;}if(u(C)){var m=g(C);o.startupParameters=m.startupParameters;if(m["sap-xapp-state"]){o["sap-xapp-state"]=m["sap-xapp-state"];}}return o;}return{constructAppComponentId:d,getParameterMap:g,isCoreExtAlreadyLoaded:i,logAnyApplicationDependenciesMessages:e,logInstantiateComponentError:l,shouldLoadCoreExt:a,shouldLoadDefaultDependencies:b,shouldUseAmendedLoading:s,urlHasParameters:u,removeParametersFromUrl:r,createUi5Component:c,prepareBundle:p,loadBundle:h,createComponentProperties:j,createComponentData:k,buildBundleResourcesArray:f};},false);
