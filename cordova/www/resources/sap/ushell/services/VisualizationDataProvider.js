// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define([],function(){"use strict";function V(){this._init.apply(this,arguments);}V.prototype._init=function(l){this.oLaunchPageAdapter=l;this.oCatalogTilePromise=null;};V.prototype._getCatalogTiles=function(){if(this.oCatalogTilePromise){return this.oCatalogTilePromise;}var l=this.oLaunchPageAdapter;this.oCatalogTilePromise=new Promise(function(r,a){l.getCatalogs().then(function(c){var d=[];var C=[];var f=[];var o={};for(var i=0;i<c.length;i++){d.push(l.getCatalogTiles(c[i]).then(function(b){C.push(b);}));}jQuery.when.apply(null,d).done(function(){f=[].concat.apply([],C);for(var y=0;y<f.length;y++){o[l.getCatalogTileId(f[y])]=f[y];}r(o);}).fail(a);}).fail(a);});return this.oCatalogTilePromise;};V.prototype.getVisualizationData=function(){var l=this.oLaunchPageAdapter,c;return this._getCatalogTiles().then(function(C){return Object.keys(C).reduce(function(v,i){c=C[i];v[i]={title:l.getCatalogTilePreviewTitle(c),subTitle:l.getCatalogTilePreviewSubtitle(c),icon:l.getCatalogTilePreviewIcon(c),info:l.getCatalogTilePreviewInfo(c),size:l.getCatalogTileSize(c),indicatorDataSource:l.getCatalogTilePreviewIndicatorDataSource(c),url:l.getCatalogTileTargetURL(c),isCustomTile:l.isCustomTile&&l.isCustomTile(c)};return v;},{});}).catch(function(e){return Promise.reject(e);});};V.prototype.getVisualizationView=function(v){var l=this.oLaunchPageAdapter;return this._getCatalogTiles().then(function(c){var C=c[v];if(!C){return Promise.reject("Visualization "+v+" not found");}return l.getCatalogTileView(C,false);});};V.hasNoAdapter=false;return V;});
