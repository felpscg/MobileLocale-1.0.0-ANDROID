/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/base/ManagedObject","sap/fe/macros/ResourceModel","sap/ui/core/util/XMLPreprocessor","sap/ui/base/SyncPromise"],function(J,M,R,X,S){"use strict";var i=R.getModel();i.bindContext=i.bindContext||function(){return{initialize:function(){},attachChange:function(){},detachChange:function(){},attachEvents:function(){},detachEvents:function(){},updateRequired:function(){},destroy:function(){},getContext:function(){}};};function v(n,m,c,N){var d=(m.metadataContexts&&Object.keys(m.metadataContexts))||[],p=(m.properties&&Object.keys(m.properties))||[];d.forEach(function(k){var C=m.metadataContexts[k];if(C.required&&!c[k]){throw new Error(n+": "+"Required metadataContext '"+k+"' is missing");}if(c[k]&&C.$kind&&C.$kind!==c[k].getObject("$kind")){throw new Error(n+": "+"metadataContext '"+k+"' must be $kind '"+C.$kind+"' but is '"+c[k].getObject("$kind")+"'");}});p.forEach(function(k){var P=m.properties[k],o=N.getAttribute(k);if(!o&&P.hasOwnProperty("defaultValue")){N.setAttribute(k,P.defaultValue);}});}function r(m,n,V){var f=m.fragment||m.namespace+"."+m.name,N="this",I=N+".i18n",c={},A=new J(n),s=n.getAttribute("metadataContexts"),o={},d=V.getSettings();A._getObject=function(P,C){return n.getAttribute(P);};A.getContextName=function(){return N;};A.$$valueAsPromise=true;c[I]=i.getContext("/");if(!d[f]){d[f]={};}var t=null;var e=true;if(m.hasValidation){var D=m.metadata.properties;var g=m.metadata.metadataContexts;var h=Object.keys(D);var k=Object.keys(g);var l=[];for(var j=0;j<h.length;j++){if(n.hasAttribute(h[j])){l.push(V.visitAttribute(n,n.attributes[h[j]]));}}e=false;for(var j=0;j<k.length;j++){if(n.hasAttribute(k[j])){var p=n.getAttribute(k[j]);l.push(V.getResult(p,n));var q=M.bindingParser(p);q.name=k[j];a(c,V,q,o);}else{e=true;}}t=S.all(l);}else{t=V.visitAttributes(n);}return t.then(function(){if(e&&s){o=s?M.bindingParser(s):{parts:[]};if(!o.parts){o={parts:[o]};}for(var j=0;j<o.parts.length;j++){a(c,V,o.parts[j],o);V=V["with"](c,false);}}}).then(function(){c[N]=A.getContext("/");v(f,m.metadata,c,n);var C=V["with"](c,true);return C.insertFragment(f,n);});}function a(c,V,C,m){var k=C.name||C.model||undefined;if(m[k]){return;}try{var s=C.path;if(C.model!=null){s=C.model+">"+s;}c[k]=V.getContext(s);m[k]=c[k];}catch(e){}}function b(m){X.plugIn(r.bind(this,m),m.namespace,m.name);}return{register:b};});
