// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["jquery.sap.global","sap/suite/ui/commons/UnifiedThingInspector","sap/ui/base/Object","sap/ui/core/format/NumberFormat","sap/viz/ui5/data/FlattenedDataset","sap/ui/core/Locale","sap/ui/model/type/DateTime","sap/ui/model/type/Time","sap/ui/model/type/Date","sap/ui/model/type/Float","sap/ui/model/type/Integer","sap/ui/model/json/JSONModel","sap/ui/core/Control","sap/m/Image","sap/m/Link","sap/m/Text","sap/ui/core/library","sap/ui/layout/VerticalLayout","sap/m/Label","sap/ui/layout/form/SimpleForm","sap/suite/ui/commons/UnifiedThingGroup","sap/ui/ux3/ThingGroup","sap/ui/core/HTML","sap/m/Column","sap/m/ColumnListItem","sap/m/library","sap/m/Table","sap/m/Page","sap/m/VBox","sap/m/Input","sap/m/List","sap/m/StandardListItem","sap/ui/model/FilterOperator","sap/m/DateTimeInput","sap/ui/model/Filter","sap/m/ViewSettingsItem","sap/m/ViewSettingsCustomItem","sap/ui/core/CustomData","sap/m/ViewSettingsDialog","sap/ui/model/Sorter","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/viz/ui5/Area","sap/viz/ui5/Bar","sap/viz/ui5/Bubble","sap/viz/ui5/Column","sap/viz/ui5/StackedColumn","sap/viz/ui5/StackedColumn100","sap/viz/ui5/Donut","sap/viz/ui5/Heatmap","sap/viz/ui5/HorizontalArea","sap/viz/ui5/Line","sap/viz/ui5/Pie","sap/viz/ui5/Scatter","sap/viz/ui5/Treemap","sap/viz/ui5/types/Title","sap/suite/ui/commons/KpiTile","sap/ui/model/odata/ODataModel","sap/suite/ui/commons/FacetOverview","sap/suite/ui/commons/library","sap/ui/layout/Grid","sap/ui/vbm/VBI","sap/ui/layout/HorizontalLayout","sap/ui/core/Icon","sap/m/Carousel","sap/ui/core/IconPool","sap/ushell/resources","sap/ushell/ui/footerbar/AddBookmarkButton","sap/suite/ui/commons/LinkActionSheet","sap/ushell/services/AppConfiguration","sap/m/ActionSheet","sap/ushell/ui/footerbar/JamDiscussButton","sap/ushell/ui/footerbar/JamShareButton"],function($,U,O,N,F,L,D,T,c,d,I,J,C,f,g,h,q,V,r,S,s,t,H,u,v,w,x,P,y,z,A,B,E,G,K,M,Q,R,W,X,Y,Z,_,a1,b1,c1,d1,e1,f1,g1,h1,i1,j1,k1,l1,m1,n1,o1,p1,q1,r1,s1,t1,u1,v1,w1,x1,y1,z1,A1,B1,C1,D1,E1){"use strict";var F1=w.URLHelper;var G1=w.PlacementType;var H1=r1.FacetOverviewHeight;var I1=w.DateTimeInputType;var J1=w.ListMode;var K1=w.ListSeparators;var L1=w.BackgroundDesign;var M1=w.ListType;var N1=q.TextAlign;var O1={},P1=[],Q1={},R1={},S1="displayFactSheet",T1,U1;T1=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();if(sap.ui.getCore().getConfiguration().getLanguage()==="ZH"){T1=new L("zh_CN");}function V1(a){return a<0;}function W1(a){var b=Number(a).toFixed(0);if(V1(a)){b=Number(b)*-1;}return b;}function X1(a,b){var e,o,i,n;if(!a){return"";}o=new RegExp(N.oDefaultFloatFormat.groupingSeparator,"g");if(b>=0){b=parseInt(b,10);n=N.getFloatInstance({minFractionDigits:b,maxFractionDigits:b},T1);}else{n=N.getFloatInstance({minFractionDigits:0,maxFractionDigits:99},T1);}e=n.format(a);i=e.replace(/[\D]/g,"");if(i&&i.length>6){a=a.replace(o,"");if(W1(a)<1000){return N.getIntegerInstance().format(a);}n=N.getFloatInstance({minFractionDigits:1,maxFractionDigits:1,style:"short"},T1);return n.format(a);}return e;}function Y1(){var o="",i,j,p,a,b,m,e,k,n,l,E2;b=this.getElementBinding().sPath.split("/")[1];m=this.getModel();e=this.mBindingInfos.value.parameters;k=this.mBindingInfos.value.parts;for(i=0;i<e.length;i+=1){o=o+e[i].string;}for(j=0;j<k.length;j+=1){p=k[j].path;l="{"+p+"}";a=m.oData[b][p];o=o.replace(l,a);}n=l2(o);if($.isNumeric(n)){E2=this.mBindingInfos.value.parts.filter(function(F2){return(F2.path===p);});n=X1(n,E2[0].type.oFormatOptions.maxFractionDigits);this.setDoubleFontSize(true);}this.setValue(n);this.getElementBinding().detachChange(Y1);}var Z1=function(){var a="";if(U1.getName()&&U1.getDescription()){a=U1.getName()+", "+U1.getDescription();}else if(U1.getName()&&!U1.getDescription()){a=U1.getName();}else if(!U1.getName()&&U1.getDescription()){a=U1.getDescription();}return a;};var $1=function(a){var b,e,i;b=a.slice(1).split("/");e="/";for(i=0;i<b.length;i+=1){if((b[i].indexOf("(")>0)&&(b[i].indexOf("sid(")<0)){break;}else{e+=b[i]+"/";}}return e;};var _1=function(a,m){var e,b,i,n;b=a.slice(m.sServiceUrl.length+1);if(b.indexOf("/")>=0){i=b.split("/");n=i[i.length];e=i[i.length-1];if(e.indexOf("(")>=0){e=e.slice(e.indexOf("("));}e=this.getNavEntitySet(e,n,m.getMetadata());}else if(b.indexOf("(")>=0){e=b.slice(0,b.indexOf("("));}else if(b.indexOf("?")>=0){e=b.slice(0,b.indexOf("?"));}else{e=b;}return e;};var a2=function(a,m){var e,k="",o,b;e=a.slice(m.sServiceUrl.length+1);if(e.indexOf("(")>=0){k=e.slice(e.indexOf("(")+1,e.indexOf(")"));if(k.indexOf("=")<=0){o=m.getServiceMetadata();b=d2(_1(a,m),o);k=b2(b,o)+"="+k;}}return k;};var b2=function(e,m){var i,j,a;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.namespace===e.slice(0,e.lastIndexOf("."))){for(j=0;j<a.entityType.length;j+=1){if(a.entityType[j].name===e.slice(e.lastIndexOf(".")+1)){return a.entityType[j].key.propertyRef[0].name;}}}}};var c2=function(e,m){var i,j,a,b;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){b=a.entityContainer[0].entitySet;for(j=b.length-1;j>=0;j-=1){if(b[j].entityType===e){return b[j].name;}}}}};var d2=function(e,m,b){var i,j,a,k,l;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){k=a.entityContainer[0].entitySet;for(j=k.length-1;j>=0;j-=1){if(k[j].name===e){if(b){l=k[j].entityType.slice(a.namespace.length+1);}else{l=k[j].entityType;}return l;}}}}};var e2=function(e,n,m){var i,j,k,a,b,l,o;a=e.split(".");for(i=m.dataServices.schema.length-1;i>=0;i-=1){b=m.dataServices.schema[i];l=a[0];if(a.length>2){for(k=1;k<a.length-1;k+=1){l+="."+a[k];}}if(b.namespace===l){for(j=0;j<b.entityType.length;j+=1){if(b.entityType[j].name===a[a.length-1]){if(b.entityType[j].navigationProperty){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===n){o=b.entityType[j].navigationProperty[k];return{name:o.relationship,toRole:o.toRole};}}}}}}}};var f2=function(e,n,m){var a,b,o,i,l,j,p,k;a=d2(e,m);if(n.charAt(0)==="@"){if(O1.termDefinitions&&O1.termDefinitions[n]){b=O1.termDefinitions[n];if(b.indexOf("Collection")>=0){b=b.slice(b.indexOf("(")+1,b.indexOf(")"));}return c2(b,m);}}else{o=e2(a,n,m);if(o){for(i=m.dataServices.schema.length-1;i>=0;i-=1){l=m.dataServices.schema[i];if(l.entityContainer&&l.entityContainer[0].associationSet){for(j=l.entityContainer[0].associationSet.length-1;j>=0;j-=1){p=l.entityContainer[0].associationSet[j];if(p.association===o.name){for(k=0;k<p.end.length;k+=1){if(p.end[k].role===o.toRole){return p.end[k].entitySet;}}}}}}}}};var g2=function(e,n,m){var i,j,k,a,o,b,l,p,E2;a=d2(e,m);p=a.split(".")[a.split(".").length-1];o=e2(a,n,m);if(o){for(i=m.dataServices.schema.length-1;i>=0;i-=1){b=m.dataServices.schema[i];for(j=0;j<b.entityType.length&&!E2;j+=1){if(b.entityType[j].name===p){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===n){E2=b.entityType[j].navigationProperty[k].toRole;break;}}}}for(j=b.association.length-1;j>=0;j-=1){l=b.association[j];if(b.namespace+"."+l.name===o.name){for(k=0;k<l.end.length;k+=1){if(l.end[k].role===E2){return l.end[k].multiplicity;}}}}}}else{jQuery.sap.log.error("\""+n+"\" wasn't found in the metadata document. Check whether the corresponding search connector is active.");return 0;}};var h2=function(e,m){var o,a,b,i;o={};if(O1.expand){if(O1.expand[d2(e,m)]){a=O1.expand[d2(e,m)];b=[];for(i in a){if(a.hasOwnProperty(i)){b.push(a[i]);}}o.expand=b.join(", ");}}return o;};var i2=function(a,e,o){var m,b,j,k,l,n;for(m=o.dataServices.schema.length-1;m>=0;m-=1){b=o.dataServices.schema[m];for(j=0;j<b.entityType.length;j+=1){if(b.entityType[j].name===e.split(".")[e.split(".").length-1]){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===a){for(l=0;l<b.association.length;l+=1){for(n=b.association[l].end.length-1;n>=0;n-=1){if(b.association[l].end[n].role===b.entityType[j].navigationProperty[k].toRole){return(b.association[l].end[n].type);}}}}}}}}};var j2=function(p,o){var b={},j;b.parts=[];b.parameters=[];for(j=p.length-1;j>=0;j-=1){if(p[j].Type==="Path"){if(p[j].EdmType){switch(p[j].EdmType){case"Edm.DateTimeOffset":case"Edm.DateTime":b.parts.push({path:p[j].Value,type:new D({"UTC":true})});break;case"Edm.Time":b.parts.push({path:p[j].Value+"/ms",type:new T({source:{pattern:"timestamp"},UTC:true})});break;case"Edm.Date":b.parts.push({path:p[j].Value,type:new c({"UTC":true})});break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":b.parts.push({path:p[j].Value,type:new d()});break;case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":b.parts.push({path:p[j].Value,type:new I()});break;default:b.parts.push({path:p[j].Value});break;}}else{b.parts.push({path:p[j].Value});}}else if(p[j].Type==="String"){b.parameters.unshift({string:p[j].Value});}}b.formatter=function(){var a="",e,k,l,i,m="",n=false,E2=0,F2=0;if(arguments&&arguments.length>=1){e=arguments.length-1;l="";i=0;if(p&&p[0]&&(p[0].Type==="String")&&(p[0].Value.substr(0,1)==="#")){n=true;}for(k=0;k<p.length;k+=1){if(p[k].Type==="Path"){l=arguments[e];if(!l||(l.length===0)){if(a.length>i){if(a.indexOf("(")>i){a=a.substr(0,i);}else{a=a.substr(0,i);l=a;}}}else{if(n){l=encodeURIComponent(l);}a+=l;E2+=1;}e-=1;i=a.length;}else{i=a.length;m=p[k].Value;if(m.indexOf("(")!==-1){F2+=1;}if((l&&l.length>0)||(m.indexOf("(")!==-1)||(m&&(m.substr(0,1)==="#"))){a+=p[k].Value;}else{m="";}}}if(o){a=o(a);}a=a.trim();if((E2===1)&&(F2>0)&&(a.substr(0,1)==="(")&&(a.substr(-1)===")")){a=a.substr(1,a.length-2);}return a.trim();}};return b;};var k2=function(o,p){var k;for(k in o){if(o.hasOwnProperty(k)){if(k==="__metadata"){continue;}else if(k===p){return o[k];}else if(typeof o[k]==="object"){return k2(o[k],p);}}}};var l2=function(a){var l,n,b,e={},i;l=a.lastIndexOf("/");n=a.slice(0,l);b=a.slice(l+1);if(!R1[a]){e=new J();e.loadData(n,null,false);R1[a]=e.getData();}else{e=R1[a];}if(R1[a]&&R1[a].d){if(!R1[a].d[b]){i=k2(R1[a].d,b);}else{i=R1[a].d[b];}}return i;};var m2=function(o,e,m,a){var b,i,n,j,k,l,p,E2;b=new C();i=o2(o.Value,o.EdmType,e);if(o.Value&&o.Value["com.sap.vocabularies.UI.v1.IsImageURL"]){b=new f({height:"50px"});if(i.BindingInfo){b.bindProperty("src",i.BindingInfo);}else{b.setProperty("src",i.String);}}else{if(o.UrlRef||o.Url||(o.Target&&o.Target.Path)){b=new g({wrapping:true});}else{b=new h();if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){b.setTextAlign(N1.End);}}b.addStyleClass("sapFactsheetUtiDataField");if(i.BindingInfo){b.bindProperty("text",i.BindingInfo);}else{b.setProperty("text",i.String);}}if((o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigation")&&m){n=o.Target.Path;if(O1[e][n.slice(1)]){if(n.charAt(0)==="@"){if(n.indexOf("/")<0){j=O1[e][n.slice(1)].UrlRef;}else{j=O1[e][n.slice(1,n.indexOf("/"))].UrlRef;}b.bindProperty("href",p2(j));}}b.attachPress(function(F2){return false;});}if(o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o.Url.String){b.setHref(o.Url.String);}else{b.bindProperty("href",p2(o.Url));k=new h({wrapping:true});if(i.BindingInfo){k.bindProperty("text",jQuery.extend({},i.BindingInfo));}else{k.setProperty("text",i.String);}b.setVisible(false);l=new V();l.addContent(b);l.addContent(k);if(!P1[P1.indexOf(a)].Links){P1[P1.indexOf(a)].Links=[];}if(o.Url.Apply){p=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("-"));E2=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("?"));}P1[P1.indexOf(a)].Links.push({sSemanticObject:p,sIntend:E2,oVL:l});}}if(l){return l;}return b;};var n2=function(o,l,p,b){var a,e="",i="",m,j,k,n;a=new r(l);a.addStyleClass("sapFactsheetUtiLabel");if(b){e=":";}if(o.Label){if(o.Label.String){a.setText(o.Label.String.trim()+e);a.setTooltip(o.Label.String.trim());}else if(o.Label.Path){a.bindProperty("text",o.Label.Path);a.bindProperty("tooltip",o.Label.Path);}}else if(o.Value){if(o.Value.Path&&p){m=p[o.Value.Path];for(j in m){if(m.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(m[j].label){i=m[j].label;break;}}}}}else if(o.Value.Apply&&(o.Value.Apply.Name==="odata.concat")){for(k in o.Value.Apply.Parameters){if(o.Value.Apply.Parameters.hasOwnProperty(k)){n=o.Value.Apply.Parameters[k];if(n.Type==="Path"){m=p[n.Value];for(j in m){if(m.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(m[j].label){i=m[j].label;break;}}}}break;}}}}a.setText(i+e);a.setTooltip(i);}return a;};var o2=function(o,e,a){var b={},p=[],k=[],l=[],i,j,m,n,E2,F2,G2,H2,I2,J2,K2,L2;var M2=function(a,N2,O2){var m,P2={};m=O1.propertyAnnotations[a];if(m&&m[N2]&&m[N2][O2]){if(m[N2][O2].Path){P2.Type="Path";P2.Value=m[N2][O2].Path;}else{P2.Type="String";P2.Value=m[N2][O2].String;}}return P2;};if(!o){return false;}if(o.Apply){if(o.Apply.Name==="odata.concat"){if(a&&O1.propertyAnnotations&&O1.propertyAnnotations[a]){n=o.Apply.Parameters;for(j=0;j<n.length;j+=1){p.push(n[j]);if(n[j].Type==="Path"){m=M2(a,n[j].Value,"Org.OData.Measures.V1.ISOCurrency");if(!$.isEmptyObject(m)){p.push({Type:"String",Value:" "});p.push({Type:m.Type,Value:m.Value});}m=M2(a,n[j].Value,"Org.OData.Measures.V1.Unit");if(!$.isEmptyObject(m)){p.push({Type:"String",Value:" "});p.push({Type:m.Type,Value:m.Value});}}}b.BindingInfo=j2(p);}else{b.BindingInfo=j2(o.Apply.Parameters);}}}else if(o.Path){if(o.Path.charAt(0)==="@"){E2=O1[a][o.Path.slice(1,o.Path.indexOf("/"))].UrlRef;F2=o.Path.slice(o.Path.indexOf("/")+1);if(E2&&E2.Apply){G2=E2.Apply.Parameters;switch(E2.Apply.Name){case"odata.concat":k=G2;k.push({Type:"String",Value:"/"+F2});break;case"odata.fillUriTemplate":H2=G2[0].Value.split("{");for(i in H2){if(H2.hasOwnProperty(i)){if(H2[i].indexOf("}")<0){k.push({Type:"String",Value:H2[i]});}else{I2=H2[i].split("}");for(j=1;j<G2.length;j+=1){if(G2[j].Name===I2[0]){J2=G2[j].Value;if(J2.Path){k.push({Type:"Path",Value:J2.Path});}else if(J2.Apply&&J2.Apply.Name&&(J2.Apply.Name.toLowerCase()==="odata.uriencode")){K2=J2.Apply.Parameters[0];k.push({Type:K2.Type,Value:encodeURIComponent(K2.Value)});k.push({Type:"String",Value:"{"+encodeURIComponent(K2.Value)+"}"});}}}k.push({Type:"String",Value:I2[1]});}}}k.push({Type:"String",Value:"/"+F2});b.fnChange=Y1;break;default:break;}b.BindingInfo=j2(k,l2);}else if(E2&&E2.Path){k.push({Type:"Path",Value:E2.Path},{Type:"String",Value:"/"+F2});b.BindingInfo=j2(k,l2);}else if(E2&&E2.String){b.String=l2(E2.String+"/"+F2);}}else{b.BindingInfo={};switch(e){case"Edm.DateTimeOffset":case"Edm.DateTime":b.BindingInfo={path:o.Path,type:new D({"UTC":true})};break;case"Edm.Time":b.BindingInfo={path:o.Path+"/ms",type:new T({source:{pattern:"timestamp"},UTC:true})};break;case"Edm.Date":b.BindingInfo={path:o.Path,type:new c({"UTC":true})};break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":if((e==="Edm.Decimal")||(e==="Edm.Double")||(e==="Edm.Single")){L2=new d();}else if((e==="Edm.Int16")||(e==="Edm.Int32")||(e==="Edm.Int64")){L2=new I();}if(O1.propertyAnnotations){l.push({Type:"Path",Value:o.Path,EdmType:e},{Type:"String",Value:" "});m=M2(a,o.Path,"Org.OData.Measures.V1.ISOCurrency");if(!$.isEmptyObject(m)){l.push({Type:m.Type,Value:m.Value});}m=M2(a,o.Path,"Org.OData.Measures.V1.Unit");if(!$.isEmptyObject(m)){l.push({Type:m.Type,Value:m.Value});}b.BindingInfo=j2(l);}else{b.BindingInfo={path:o.Path,type:L2};}break;default:b.BindingInfo={path:o.Path};break;}}}else if(o.String){b.String=o.String;}return b;};var p2=function(o){var a=[],p,b,j,e,i={},k,l,m;if(o&&o.Apply){p=o.Apply.Parameters;switch(o.Apply.Name){case"odata.fillUriTemplate":p[0].Value=p[0].Value.trim();b=p[0].Value.split("{");for(j=0;j<b.length;j+=1){if(b[j].indexOf("}")<0){a.push({"Value":b[j],"Type":"String"});}else{e=b[j].split("}");i={};i.Value=e[0];i.Type="Path";for(j=1;j<p.length;j+=1){if(p[j].Name===i.Value){k=p[j].Value;if(k.Path){i.Value=k.Path;}else if(k.Apply&&k.Apply.Name&&k.Apply.Name.toLowerCase()==="odata.uriencode"){i.Value=k.Apply.Parameters[0].Value;}break;}}a.push(i);a.push({"Value":e[1],"Type":"String"});}}l=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(l&&l.url){m=jQuery.sap.getUriParameters(l.url).get("sap-system");if(m){a.push({Type:"String",Value:"&sap-system="+m});}}break;default:break;}}return j2(a);};var q2=function(o){var a=N1.Begin;if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){a=N1.End;}return a;};var r2=function(m,e,a,o,b,k){var i,j=0,l=0,n=0,p=0,E2,F2,G2,H2,I2,J2;if(!b){b=m.getServiceMetadata();}if(!a){a=[];}E2=d2(e,b);J2=new S({labelMinWidth:150,maxContainerCols:2});F2=(O1.propertyExtensions)?O1.propertyExtensions[E2]:[];if(o&&o.High){l=o.High;}if(o&&o.Medium){n=o.Medium;}if(o&&o.Low){p=o.Low;}for(i=0;i<a.length;i+=1){G2=y2(a[i]);if(o&&(G2==="High")){if(l){l-=1;}else{continue;}}else if(o&&(G2==="Medium")){if(n){n-=1;}else{continue;}}else if(o&&(G2==="Low")){if(p){p-=1;}else{continue;}}if(o&&o.Total&&(j>=o.Total)){break;}j+=1;H2=new C().setModel(m);I2=n2(a[i],{textAlign:N1.End},F2,false);I2.addStyleClass("sapFactsheetUtiFormPadding");H2=m2(a[i],E2,b,k);H2.addStyleClass("sapFactsheetUtiFormPadding");if(H2.setTextAlign){H2.setTextAlign(N1.Begin);}J2.addContent(I2);J2.addContent(H2);}J2.addStyleClass("sapFactsheetUtiFormLayout");return J2;};var s2=function(m,e,o,b,a){var j="",k=[],i,l,n,p,E2,F2,G2,H2,I2,J2,K2,L2,M2,N2,O2;l=m.getServiceMetadata();switch(o.RecordType){case"com.sap.vocabularies.UI.v1.ReferenceFacet":n=new s();if(o.Label&&o.Label.String){n.setTitle(o.Label.String);}p=o.Target.AnnotationPath;E2=p.substring(p.lastIndexOf("@")+1);p=p.substring(0,p.lastIndexOf("@")-1);if(p){j=g2(e,p,l);}F2=E2.split("#");switch(F2[0]){case"com.sap.vocabularies.UI.v1.LineItem":case"com.sap.vocabularies.UI.v1.Chart":case"com.sap.vocabularies.UI.v1.Badge":case"com.sap.vocabularies.UI.v1.Identification":if(p){G2=f2(e,p,l);M2=d2(G2,l);}else{M2=d2(e,l);}if(F2[0]==="com.sap.vocabularies.UI.v1.Chart"){E2="com.sap.vocabularies.UI.v1.LineItem";}N2=O1[M2][E2];if(O1.propertyExtensions){O2=O1.propertyExtensions[M2];}if(j==="*"&&F2[0]!=="com.sap.vocabularies.UI.v1.Identification"){H2=u2(m,N2,M2,l,b+"/"+p,o,O2,a);n.setContent(H2);}if(F2[0]==="com.sap.vocabularies.UI.v1.Identification"){I2=O1[M2]["com.sap.vocabularies.UI.v1.Identification"];J2=new V({width:"100%"}).setModel(m);if(p){J2.addContent(r2(m,G2,I2,null,null,a)).addStyleClass("sapFactsheetUtiPanel");J2.bindElement(b+"/"+p);}else{J2.addContent(r2(m,e,I2,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}n.setContent(J2);}break;case"com.sap.vocabularies.UI.v1.StatusInfo":if(p){G2=f2(e,p,l);K2=O1[d2(G2,l)]["com.sap.vocabularies.UI.v1.StatusInfo"];n.setContent(r2(m,G2,K2,null,null,a).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+p));}else{K2=O1[d2(e,l)]["com.sap.vocabularies.UI.v1.StatusInfo"];n.setContent(r2(m,e,K2,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}break;case"com.sap.vocabularies.UI.v1.FieldGroup":L2=O1[d2(e,l)][E2];if(L2){if(!n.getTitle()||(n.getTitle()==="")){if(L2.Label){if(L2.Label.String){n.setTitle(L2.Label.String);}else if(L2.Label.Path){n.bindProperty("title",L2.Label.Path);}}}if(p){G2=f2(e,p,l);n.setContent(r2(m,G2,L2.Data,null,null,a).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+p));}else{n.setContent(r2(m,e,L2.Data,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}}break;default:break;}return n;case"com.sap.vocabularies.UI.v1.ReferenceURLFacet":n=new t({title:o.Label.String});n.setContent(t2(o));return n;case"com.sap.vocabularies.UI.v1.CollectionFacet":for(i=0;i<o.Facets.length;i+=1){k.push(s2(m,e,o.Facets[i],b,a));}return k;default:break;}};var t2=function(o){var i,a,b;switch(o.UrlContentType.String){case"image/png":case"image/jpeg":case"image/gif":i=new f({width:"100%"});if(o.Url.String){i.setSrc(o.Url.String);}return i;default:a=new H();if(o.Url.String){a.setContent("<iframe src = '"+o.Url.String+"' width='100%' height='250px' frameborder='0'></iframe>");}else if(o.Url.Path){a.bindProperty("content",{path:o.Url.Path,formatter:function(){b="<iframe src = '"+o.Url.Path+"' width='100%' height='250px' frameborder='0'></iframe>";return b;}});}return a;}};var u2=function(m,a,e,o,b,l,n,E2){var F2=[],G2=[],H2=[],I2=[],J2=[],K2=[],L2=false,i,k,M2,N2,O2,P2,Q2,R2,S2,T2,U2,V2,W2,X2,Y2,Z2,$2,_2,a3,b3,c3;a3=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");if(!o){o=m.getServiceMetadata();}M2=(O1.propertyExtensions)?O1.propertyExtensions[e]:[];N2=6;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){N2=5;}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){N2=4;}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){N2=3;}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){N2=2;}O2=0;P2=0;for(i=0;i<a.length;i+=1){Q2=y2(a[i]);if(Q2==="High"){O2+=1;}}if(N2>O2){P2=N2-O2;}else if(N2<O2){O2=N2;}I2.push(new u({visible:false}));H2.push(new h().bindText("__metadata/uri"));for(i=0;i<a.length;i+=1){c3="";T2=new C();Q2=y2(a[i]);T2=m2(a[i],e,o,E2);R2=n2(a[i],null,M2);if(a[i].Value.Path){Z2=a[i].Value.Path;if(n&&n[Z2]&&n[Z2]["http://www.sap.com/Protocols/SAPData"]&&n[Z2]["http://www.sap.com/Protocols/SAPData"].sortable){R2.data("IsSortable",n[Z2]["http://www.sap.com/Protocols/SAPData"].sortable);if(n[Z2]["http://www.sap.com/Protocols/SAPData"].sortable==="true"){L2=true;}}else{R2.data("IsSortable","true");L2=true;}if(n&&n[Z2]&&n[Z2]["http://www.sap.com/Protocols/SAPData"]&&n[Z2]["http://www.sap.com/Protocols/SAPData"].filterable){R2.data("IsFilterable",n[Z2]["http://www.sap.com/Protocols/SAPData"].filterable);if(n[Z2]["http://www.sap.com/Protocols/SAPData"].filterable==="true"){L2=true;}}else{R2.data("IsFilterable","true");L2=true;}}else{b3=true;for(k=0;k<a[i].Value.Apply.Parameters.length;k+=1){if(a[i].Value.Apply.Parameters[k].Type==="Path"){Z2=a[i].Value.Apply.Parameters[k].Value;if(n[Z2]&&n[Z2]["http://www.sap.com/Protocols/SAPData"]&&n[Z2]["http://www.sap.com/Protocols/SAPData"].sortable){if(n[Z2]["http://www.sap.com/Protocols/SAPData"].sortable==="false"){b3=false;c3="";break;}}if(c3){c3+=";";}c3+=Z2;}}Z2=c3;if(b3===false){R2.data("IsSortable","false");}else{R2.data("IsSortable","true");L2=true;}R2.data("IsFilterable","false");}if(a[i].EdmType){R2.data("EdmType",a[i].EdmType);}R2.data("ColumnName",Z2);F2.push(R2);G2.push(T2);if(Q2==="High"){if(O2>0){S2=true;O2-=1;}else{S2=false;}}else if(Q2==="Medium"){if(P2>0){S2=true;P2-=1;}else{S2=false;}}else{S2=false;}I2.push(new u({header:R2,hAlign:q2(a[i]),visible:S2}));H2.push(T2);}U2=new v({type:M1.Navigation,unread:false,cells:H2});if(l){V2=l.Label.String;}U2.attachPress({aColumns:a,aLabels:F2,aControls:G2,sTitle:V2},function(j,p){var i,j3,k3,R2,l3,m3,n3;j3=j.getSource().getCells()[0].getText().substr(j.getSource().getCells()[0].getText().lastIndexOf("/"));k3=new x({backgroundDesign:L1.Transparent,showSeparators:K1.None,columns:[new u({hAlign:N1.End}),new u()]});k3.addStyleClass("sapFactsheetUtiPanel");k3.addStyleClass("sapFactsheetUtiTilePadding");k3.addStyleClass("sapFactsheetUtiTableNoTopBorder");k3.bindElement(j3);for(i=0;i<a.length;i+=1){R2=F2[i].clone();R2.setText(R2.getText()+":");n3=G2[i].clone();R2.setLabelFor(n3);k3.addItem(new v({cells:[R2,n3]}));}l3=new s({content:k3,title:V2,description:Z1()});m3=new P({title:U1.getTitle(),showNavButton:true,content:[l3]});U1.navigateToPage(m3,true);U1.attachAfterNavigate(k3,function(j){if(j.getParameters().getParameters().toId.indexOf("__page")>=0){var o3;o3=k3.getItems();if(o3.length>0&&P1.indexOf(E2)>=0){P1[P1.indexOf(E2)].bLoaded=true;P1[P1.indexOf(E2)].bProcessed=false;P1[P1.indexOf(E2)].bIsTable=true;P1[P1.indexOf(E2)].oTableItems=o3;C2(P1.indexOf(E2));}}});});W2=new x({growing:true,columns:I2});W2.setModel(m);W2.bindItems({path:b,template:U2});var d3=new y({items:[new z({placeholder:a3.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,j3,k3,l3,i;p=j.getSource().getParent().getParent().getId();j3=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));k3=j3.getFilterItems();for(i=0;i<k3.length;i+=1){if(k3[i]instanceof Q&&k3[i].getKey()===this.oParent.data("ColumnName")){l3=k3[i];break;}}if(l3){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){l3.setSelected(false);l3.setFilterCount(0);}else{l3.setSelected(true);l3.setFilterCount(1);}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});var e3=new y({items:[new A({mode:J1.SingleSelectLeft,includeItemInSelection:true,items:[new B({title:a3.getText("USHELL_FACTSHEET_GREATER_THEN")}).data("FilterOperator",E.GT),new B({title:a3.getText("USHELL_FACTSHEET_EQUALS")}).data("FilterOperator",E.EQ),new B({title:a3.getText("USHELL_FACTSHEET_LESS_THEN")}).data("FilterOperator",E.LT)]}),new z({placeholder:a3.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,j3,k3,l3,i;p=j.getSource().getParent().getParent().getId();j3=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));k3=j3.getFilterItems();for(i=0;i<k3.length;i+=1){if((k3[i]instanceof Q)&&(k3[i].getKey()===this.oParent.data("ColumnName"))){l3=k3[i];break;}}if(l3){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){l3.setSelected(false);l3.setFilterCount(0);}else{l3.setSelected(true);l3.setFilterCount(1);}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});new y({items:[new A({mode:J1.SingleSelectLeft,includeItemInSelection:true,items:[new B({title:a3.getText("USHELL_FACTSHEET_AFTER")}).data("FilterOperator",E.GT),new B({title:a3.getText("USHELL_FACTSHEET_AT")}).data("FilterOperator",E.EQ),new B({title:a3.getText("USHELL_FACTSHEET_BEFORE")}).data("FilterOperator",E.LT)]}),new G({type:I1.Date,valueFormat:new D({pattern:"yyyy/MM/dd HH:mm:ss UTC+00:00"}).getOutputPattern(),placeholder:a3.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,j3,k3,l3,i;p=j.getSource().getParent().getParent().getId();j3=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));k3=j3.getFilterItems();for(i=0;i<k3.length;i+=1){if((k3[i]instanceof Q)&&(k3[i].getKey()===this.oParent.data("ColumnName"))){l3=k3[i];break;}}if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){l3.setSelected(false);l3.setFilterCount(0);}else{l3.setSelected(true);l3.setFilterCount(1);}}}).addStyleClass("sapFactsheetUtiFilterInput")]});var f3=function(T2){var j=[],p=T2.getItems(),i,j3,k3;if(p[0].getParent().data("EdmType")==="Edm.String"&&p[0].getValue()){j.push(new K(p[0].getParent().data("ColumnName"),E.Contains,p[0].getValue()));}else if(p[0].getParent().data("EdmType")==="Edm.Decimal"&&p[1].getValue()){for(i=0;i<p[0].getItems().length;i+=1){if(p[0].getItems()[i].getSelected()===true){j3=p[0].getItems()[i].data("FilterOperator");break;}}k3=p[1].getValue();for(i=k3.length-1;i>0;i-=1){if(k3[i]===","){k3=k3.replace(k3[i],".");break;}}j.push(new K(p[1].getParent().data("ColumnName"),j3,k3));}else if(p[0].getParent().data("EdmType")==="Edm.Date"&&p[1].getValue()){for(i=0;i<p[0].getItems().length;i+=1){if(p[0].getItems()[i].getSelected()===true){j3=p[0].getItems()[i].data("FilterOperator");break;}}j.push(new K(p[1].getParent().data("ColumnName"),j3,p[1].getValue()));}else{j.push(new K(p[0].getParent().data("ColumnName"),E.EQ,p[0].getValue()));}return j;};var g3=function(p){var j3=p.getSource(),k3=j3.getFilterItems(),i,j,l3;for(i=0;i<k3.length;i+=1){if(k3[i]&&k3[i]instanceof Q){k3[i].setSelected(false);k3[i].setFilterCount(0);l3=k3[i].getCustomControl().getItems();for(j=0;j<l3.length;j+=1){if((l3[j]instanceof z)||(l3[j]instanceof G)){l3[j].setValue("");}if((l3[j]instanceof A)&&(l3[j].getSelectedItem()!==null)){l3[j].removeSelections();}}}}};var h3=g3;for(i=0;i<I2.length;i+=1){if(I2[i+1]){R2=F2[i].clone();if(R2.getText()&&(R2.data("IsSortable")==="true")&&I2[i+1].getVisible()){X2=new M({text:R2.getText(),key:R2.data("ColumnName")});if(i===0){X2.setSelected(true);}X2.Sort=R2.Sort;J2.push(X2);}if(R2.getText()&&(R2.data("IsFilterable")==="true")){if(R2.data("EdmType")==="Edm.String"){_2=d3.clone().data("ColumnName",R2.data("ColumnName")).data("EdmType",R2.data("EdmType"));}else if(R2.data("EdmType")==="Edm.Decimal"){_2=e3.clone().data("ColumnName",R2.data("ColumnName")).data("EdmType",R2.data("EdmType"));}if((R2.data("EdmType")==="Edm.String")||(R2.data("EdmType")==="Edm.Decimal")){$2=new Q({key:R2.data("ColumnName"),text:R2.getText(),customControl:_2,customData:new R({key:"callback",value:f3})});K2.push($2);}}}}Y2=new W({sortItems:J2,filterItems:K2,cancel:h3,resetFilters:g3,confirm:function(j){var j3=[],k3=[],l3=[],m3=[],i,p,n3,o3,p3,q3,r3;n3=j.getParameters();o3=W2.getBinding("items");if(n3.sortItem){p3=n3.sortItem.getKey();q3=n3.sortDescending;if(p3.indexOf(";")>0){k3=p3.split(";");for(i=0;i<k3.length;i+=1){j3.push(new X(k3[i],q3));}}else if(p3){j3.push(new X(p3,q3));}o3.sort(j3);}p=n3;for(i=0;i<p.filterItems.length;i+=1){if(p.filterItems[i]instanceof Q){r3=p.filterItems[i].getCustomData()[0].getValue();l3=r3.apply(this,[p.filterItems[i].getCustomControl()]);if(l3){if(!Array.isArray(l3)){l3=[l3];}m3=m3.concat(l3);}}else if(p.filterItems[i]instanceof M){l3=p.filterItems[i].getCustomData()[0].getValue();if(l3){if(!Array.isArray(l3)){l3=[l3];}m3=m3.concat(l3);}}}o3.filter(m3);}});if(L2===true&&(J2.length>0||K2.length>0)){W2.setHeaderToolbar(new Y({content:[new r(),new Z(),new _({icon:"sap-icon://drop-down-list",press:function(){Y2.open();},tooltip:sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("P13NDIALOG_VIEW_SETTINGS")})]}));}W2.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));var i3=(function(E2){return function(j){var p=this.getItems();if(p.length===0){this.setNoDataText(a3.getText("FACETOVERVIEW_NO_CONTENT_TEXT"));}else{this.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));}if(p.length>0&&P1.indexOf(E2)>=0){P1[P1.indexOf(E2)].bLoaded=true;P1[P1.indexOf(E2)].bProcessed=false;P1[P1.indexOf(E2)].bIsTable=true;P1[P1.indexOf(E2)].oTableItems=p;}C2(P1.indexOf(E2));};}(E2));W2.attachUpdateFinished(i3);return W2;};var v2=function(a,o,b,e){var i;switch(a){case"com.sap.vocabularies.UI.v1.ChartType/Area":i=new a1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bar":i=new b1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bubble":i=new c1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Column":i=new d1({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked":i=new e1({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100":i=new f1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Donut":i=new g1({});break;case"com.sap.vocabularies.UI.v1.ChartType/HeatMap":i=new h1({});break;case"com.sap.vocabularies.UI.v1.ChartType/HorizontalArea":i=new i1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Line":i=new j1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Pie":i=new k1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Scatter":i=new l1({});break;case"com.sap.vocabularies.UI.v1.ChartType/TreeMap":i=new m1({});break;case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked100":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/Radar":case"com.sap.vocabularies.UI.v1.ChartType/Waterfall":break;}if(i){if(o&&o.String){i.setTitle(new n1({visible:true,text:o.String}));}if(b&&b.String){i.setTooltip(b.String);}i.setWidth("100%");i.setHeight("17rem");i.setDataset(e);}else{i=new h({});}return i;};var w2=function(i){var a;i=i||1;if(jQuery.device.is.phone){a=(7*i)+"rem";}else{a=(11*i-1)+"rem";}return a;};var x2=function(a){var b=0,e=0,j=0,i,o;for(i=0;i<a.length;i+=1){o=y2(a[i]);if(o){switch(o){case"High":b+=1;break;case"Medium":e+=1;break;case"Low":j+=1;break;}}}return{High:b,Medium:e,Low:j};};var y2=function(o){var e="";if(o.Importance){e=o.Importance.EnumMember;}else if(o["com.sap.vocabularies.UI.v1.Importance"]){e=o["com.sap.vocabularies.UI.v1.Importance"].EnumMember;}return e.substr(e.indexOf("/")+1);};var z2=function(m,a,e,b){var i=false,o,j,k,l;o=new o1({doubleFontSize:false});if(a.ValueFormat){j=a.ValueFormat.NumberOfFractionalDigits.Int;}if(a.Title&&a.Title.String){o.setDescription(a.Title.String);}else if(a.Title&&a.Title.Path){o.bindProperty("description",{path:a.Title.Path});}if(a.Value&&a.Value.String){o.setValue(a.Value.String);}else if(a.Value&&a.Value.Path){k=o2(a.Value,a.Value.EdmType,e);if(k.fnChange){o.setModel(m);o.bindElement(b);o.getElementBinding().attachChange(k.fnChange,o);}if(k.String){if($.isNumeric(k.String)){i=true;o.setValue(X1(k.String,j));}else{o.setValue(k.String);}}else if(k.BindingInfo){l=k.BindingInfo;if(l.parts&&l.parts.length===2){o.bindProperty("valueUnit",l.parts[0]);l.parts[1].type=undefined;l.parts[1].formatter=(function(){return function(n){return X1(n,j);};}(j));o.bindProperty("value",l.parts[1]);}else if(l.parts&&l.parts.length===1){l.parts[0].type=undefined;l.parts[0].formatter=(function(){return function(n){return X1(n,j);};}(j));o.bindProperty("value",l);}else{o.bindProperty("value",l);}}}if(a.Value.EdmType==="Edm.Decimal"||a.Value.EdmType==="Edm.Double"||a.Value.EdmType==="Edm.Single"||a.Value.EdmType==="Edm.Int16"||a.Value.EdmType==="Edm.Int32"||a.Value.EdmType==="Edm.Int64"||i===true){o.setDoubleFontSize(true);}return o;};var A2=function(m){var a=[],b=[],e,i,k;var j=function(o){if(l(o)===false){if(o.constructor===Array){for(i=0;i<o.length;i+=1){l(o[i]);}}if(o.constructor===O){for(k in o){if(o.hasOwnProperty(k)){if(o[k].constructor!==String){j(o[k]);}}}}}};var l=function(o){if(o.RecordType&&o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o.Url&&o.Url.Apply){e=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("-"));if(a.indexOf(e)<0){a.push(e);}return true;}}else{return false;}};for(k in O1){if(O1.hasOwnProperty(k)){if(k.indexOf(m.dataServices.schema[0].namespace)>=0){j(O1[k]);}}}for(i=0;i<a.length;i+=1){if(!Q1.hasOwnProperty(a[i])){b.push(a[i]);}}return b;};var B2=function(a){var i,o,l,b;if(a.length>0){o=new J();l="/sap/opu/odata/UI2/INTEROP/SemanticObjects?$expand=Links&$format=json";b="&$filter=id%20eq%20%27";for(i=0;i<a.length;i+=1){if(b.length>22){b+="%20or%20id%20eq%20%27"+a[i]+"%27";}else{b+=a[i]+"%27";}}l+=l+b;o.loadData(l);o.attachRequestCompleted(function(){var e=[],i,j,k;if(this.getData().d&&this.getData().d.results){k=this.getData().d.results;for(i=0;i<k.length;i+=1){Q1[k[i].id]="";e=k[i].Links.results;for(j=0;j<e.length;j+=1){Q1[e[j].id.slice(0,e[j].id.indexOf("~"))]="";}}}Q1.InteropCompleted=true;C2();});}else{Q1.InteropCompleted=true;}};var C2=function(a){var i,j,k,n,b,e,l;if(Q1.InteropCompleted===true){for(i=0;i<P1.length;i+=1){if(P1[i].bLoaded&&!P1[i].bProcessed&&P1[i].Links){l=P1[i].Links;for(j=0;j<l.length;j+=1){if(Q1.hasOwnProperty(l[j].sIntend)===true){if(P1[i].bIsTable===true){if(P1[i].oTableItems){b=P1[i].oTableItems;for(k=0;k<b.length;k+=1){e=b[k].getCells();for(n=0;n<e.length;n+=1){if(e[n]instanceof V&&e[n].getContent()[0].getBindingInfo("href").parts===l[j].oVL.getContent()[0].getBindingInfo("href").parts&&e[n].getContent()[1].getBindingInfo("text").parts===l[j].oVL.getContent()[1].getBindingInfo("text").parts){e[n].getContent()[0].setVisible(true);e[n].getContent()[1].setVisible(false);}}}}}else{l[j].oVL.getContent()[0].setVisible(true);l[j].oVL.getContent()[1].setVisible(false);}}else if(P1[i].bIsTable===false){l[j].oVL.getContent()[1].setText(l[j].oVL.getContent()[0].getText());}P1[i].bProcessed=true;}}}}if(a>=0){if(P1[a].bLoaded&&!P1[a].bProcessed&&P1[a].Links){l=P1[a].Links;for(j=0;j<l.length;j+=1){if(P1[a].bIsTable===false){l[j].oVL.getContent()[1].setText(l[j].oVL.getContent()[0].getText());}}}}};var D2=function(e,l,U1){var m={},n=[],p=0,E2=0,F2=0,i,j,G2,H2,I2,J2,K2,L2,M2,N2,O2,P2,Q2,R2,S2,T2,U2,V2,W2,X2,Y2,Z2,$2,_2,a3,b3,c3,d3,e3,f3,g3,h3,i3,j3,k3,l3,m3,n3,o3,p3,q3,r3,s3,t3,u3,v3,w3;G2=$1(e);V2=l.substring(0,l.substring(0,l.lastIndexOf("/")).lastIndexOf("/"));W2=l.substring(l.substring(0,l.lastIndexOf("/")).lastIndexOf("/"));if(window.location.search.indexOf("cbn_keep_anno_case%3Dtrue")===-1){W2=W2.toLowerCase();}H2=new p1(G2,{annotationURI:V2+W2,loadAnnotationsJoined:true,loadMetadataAsync:false,json:true});H2.setCountSupported(false);U1.setModel(H2);I2=_1(e,H2);J2="/"+e.slice(G2.length);K2=H2.getServiceMetadata();O1=H2.getServiceAnnotations();L2=d2(I2,K2);M2=O1[L2]["com.sap.vocabularies.UI.v1.HeaderInfo"];N2=O1[L2]["com.sap.vocabularies.UI.v1.Facets"];U1.bindElement(J2,h2(I2,K2));X2=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");Q1.InteropCompleted=false;B2(A2(K2));U1.addStyleClass("sapFactsheetUtiThingType"+I2.replace(/\s/g,""));if(M2.TypeName.String){U1.setTitle(M2.TypeName.String);}else if(M2.TypeName.Path){U1.bindProperty("title",{path:M2.TypeName.Path});}if(M2.ImageUrl&&M2.ImageUrl.String){U1.setIcon(M2.ImageUrl.String);}else if(M2.ImageUrl&&M2.ImageUrl.Path){U1.bindProperty("icon",{path:M2.ImageUrl.Path});}else if(M2.TypeImageUrl&&M2.TypeImageUrl.String){U1.setIcon(M2.TypeImageUrl.String);}else if(M2.TypeImageUrl&&M2.TypeImageUrl.Path){U1.bindProperty("icon",{path:M2.TypeImageUrl.Path});}if(M2.Title.Value.String){U1.setName(M2.Title.Value.String);}else{U1.bindProperty("name",o2(M2.Title.Value,M2.Title.EdmType,L2).BindingInfo);}if(M2.Description&&M2.Description.Value){if(M2.Description.Value.String){U1.setDescription(M2.Description.Value.String);}else{U1.bindProperty("description",o2(M2.Description.Value,M2.Description.EdmType,L2).BindingInfo);}}for(t3 in O1[L2]){if(O1[L2].hasOwnProperty(t3)){if(t3.search("com.sap.vocabularies.UI.v1.DataPoint")!==-1){u3=O1[L2][t3];if(u3){U1.addKpi(z2(H2,u3,L2,J2));F2+=1;}}if(F2>=3){break;}}}for(i=0;i<N2.length;i+=1){if(N2[i]["com.sap.vocabularies.UI.v1.IsSummary"]){R2=N2[i];break;}}if(R2){Y2=15;for(j=0;j<R2.Facets.length;j+=1){Z2=R2.Facets[j].Target.AnnotationPath.substring(R2.Facets[j].Target.AnnotationPath.lastIndexOf("@")+1);O2=R2.Facets[j].Target.AnnotationPath;O2=O2.substring(0,O2.lastIndexOf("@")-1);R2.Facets[j].NavPath=O2;$2=f2(I2,O2,K2);R2.Facets[j].NavEntitySet=$2;if($2){_2=$2;}else{_2=I2;}R2.Facets[j].EntitySet=_2;a3=d2($2,K2);if(a3){b3=a3;}else{b3=L2;}R2.Facets[j].EntityType=b3;c3=[];if(O1[b3][Z2].length){c3=O1[b3][Z2];}else if(O1[b3][Z2].Data.length){c3=O1[b3][Z2].Data;}R2.Facets[j].Content=c3;for(i=0;i<c3.length;i+=1){d3=y2(c3[i]);if(d3==="High"){p+=1;}else if(d3==="Medium"){E2+=1;}}}if(p>=Y2){p=Y2;E2=0;}else if((p+E2)>Y2){E2=Y2-p;if(E2<0){E2=0;}}if(jQuery.device.is.phone){E2=0;}f3=Y2-p-E2;n3=new q1({title:X2.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT")});P1=[];P1.push(n3);P1[0].bLoaded=false;P1[0].bProcessed=false;P1[0].bIsTable=false;g3=[];i3=E2+p;for(j=0;j<R2.Facets.length;j+=1){j3=r2(H2,R2.Facets[j].EntitySet,R2.Facets[j].Content,{High:p,Medium:E2,Low:0},null,n3).addStyleClass("sapFactsheetUtiTilePadding");if(j>0){j3.addStyleClass("sapFactsheetUtiPaddingTop");}if(R2.Facets[j].NavPath){j3.bindElement(J2+"/"+R2.Facets[j].NavPath);}h3=x2(R2.Facets[j].Content);p-=h3.High;E2-=h3.Medium;if(((h3.High>0)&&((p+h3.High)>0))||((h3.Medium>0)&&((E2+h3.Medium)>0))){g3.push(j3);if(j>0){if(f3>0){f3-=1;}else if(E2>0){E2-=1;}else if(p>0){p-=1;}}}if((p<1)&&(E2<1)){break;}}if(p<0){p=0;}if(E2<0){E2=0;}m=new V({content:g3,width:"100%"});k3=w2();m3=1;if((i3>3)&&(i3<=9)){k3=w2(2);m3=2;}else if(i3>9){k3=w2(3);m3=3;}n3.setContent(m);n3.setRowSpan(m3);if(jQuery.device.is.phone){n3.setHeightType(H1.Auto);}else{n3.setHeight(k3);}n3.addStyleClass("sapFactsheetUtiGeneralInformationOverviewFacet");n3.attachPress({facets:R2},function(o,a){var b,k,E3,F3,m;U1.removeAllFacetContent();E3=new s();E3.setDescription(Z1());E3.setTitle(X2.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));E3.addStyleClass("sapFactsheetUtiGeneralInformationUtg");if(a.facets.Facets.length>1){b="L6 M12 S12";}else{b="L12 M12 S12";}P1[0].Links=[];F3=new V({width:"100%"});for(i=0;i<a.facets.Facets.length;i+=1){if(i%2===0){k=new s1({hSpacing:1,vSpacing:1,defaultSpan:b});}m=s2(H2,I2,a.facets.Facets[i],J2,this);m.addStyleClass("sapFactsheetUtiGeneralInformationUtgContent");if((i===0)&&(a.facets.Facets.length>1)&&(m.getTitle().trim()==="")){m.setTitle(X2.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));}k.addContent(m);if(i%2!==0){F3.addContent(k);}}P1[0].bLoaded=true;P1[0].bProcessed=false;P1[0].bIsTable=false;C2(0);if(i%2!==0){F3.addContent(k);}E3.setContent(F3);U1.addFacetContent(E3);U1.navigateToDetail();});U1.addFacet(n3);}var x3=function(P2){return function(a){var i,o,b,k,E3,F3,J2,G3,H3,I3,J3,K3,L3,M3,N3;if((P2.cardinality==="*"&&a.results&&a.results.length&&a.results.length!==0)||(P2.cardinality==="1"&&a)){F3=new J();if(P2.cardinality==="*"){if(a.results&&a.results.length){F3.setData(a);}}else{F3.setData({result:a});J2="/result";}o=new p1("/sap/opu/odata/sap/VBI_APPL_DEF_SRV",false);b=O1[P2.navigationType]["com.sap.vocabularies.UI.v1.GeoLocation"];H3=O1[P2.navigationType]["com.sap.vocabularies.UI.v1.HeaderInfo"];I3=O1[P2.navigationType]["com.sap.vocabularies.UI.v1.Identification"];if(b.Longitude&&b.Latitude){E3={"Data":{"Set":{"N":[{"name":"Spots","E":[]}]}}};if(P2.cardinality==="1"){if(b.Longitude.Path&&b.Latitude.Path){k=a[b.Longitude.Path]+";"+a[b.Latitude.Path]+";0";}E3.Data.Set.N[0].E.push({"A":k,"I":"pin_blue.png"});}else{for(i=0;i<a.results.length;i+=1){if(b.Longitude.Path&&b.Latitude.Path){k=a.results[i][b.Longitude.Path]+";"+a.results[i][b.Latitude.Path]+";0";}E3.Data.Set.N[0].E.push({"A":k,"I":"pin_blue.png"});}if(a.results.length!==0){k=a.results[0][b.Longitude.Path]+";"+a.results[0][b.Latitude.Path]+";0";}}}N3=parseInt(a.__count,10);if(Number(N3)){P2.facet.setQuantity(N3);}var O3=function(T3){var U3,V3,W3,X3,Y3;U3=$.parseJSON(T3.getParameters().data);if(U3.Action.name==="DETAIL_REQUEST"&&U3.Action.instance){V3=U3.Action.instance;if(F3.oData.results){J2="/results/"+V3.split(".")[1];}M3=H3.TypeName.String.substring(0,17);X3=parseFloat(w2(0.7))*16;Y3=parseFloat(w2(1.5))*16;W3={"SAPVB":{"version":"2.0","xmlns:VB":"VB","Windows":{"Remove":{"name":"Detail1"},"Set":{"name":"Detail1","Window":{"id":"Detail1","type":"callout","refParent":"Main","refScene":"","offsetX":"16","offsetY":"-27","modal":"false","width":Y3,"height":X3,"caption":M3,"pos.bind":V3+".GeoPosition"}}},"Scenes":{"Set":{"name":"Details","Scene":{"id":"Details","navControlVisible":"false"}}}}};this.load(W3);}};var P3=function(T3){var t3,U3,$2,V3;if(!J3){J3=m2(H3.Title,P2.navigationType,K2,P2.facet);J3.setModel(F3);J3.bindElement(J2);K3=m2(H3.Description,P2.navigationType,K2,P2.facet);K3.setModel(F3);K3.bindElement(J2);for(t3 in b.Address){if(t3==="label"){G3=m2({Value:b.Address[t3]},P2.navigationType,K2,P2.facet);G3.setModel(F3);G3.bindElement(J2);break;}}V3=7;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){V3=4;}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){V3=5;}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){V3=2;}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){V3=3;}L3=new V({width:"100%"}).setModel(H2);if(P2.navigationPath){$2=f2(P2.entitySet,P2.navigationPath,K2);L3.addContent(r2(H2,$2,I3,{High:V3},null,P2.facet));L3.setModel(F3).bindElement(J2);}else{L3.addContent(r2(H2,P2.entitySet,I3,{High:V3},null,P2.facet)).setModel(F3).bindElement(J2);}}else{J3.bindElement(J2);if(K3){K3.bindElement(J2);}if(G3){G3.bindElement(J2);}if(L3){L3.bindElement(J2);}}U3=parseFloat(w2(1.5))*16*0.95+"px";if(J3){J3.placeAt(T3.getParameter("contentarea").id);J3.addStyleClass("sapFactsheetUtiGeoPopupHead");if(jQuery.device.is.phone){J3.addStyleClass("sapFactsheetUtiGeoPopupHeadFontPhone");}J3.setWidth(U3);}if(K3){K3.placeAt(T3.getParameter("contentarea").id);K3.addStyleClass("sapFactsheetUtiGeoPopupDescr");if(jQuery.device.is.phone){K3.addStyleClass("sapFactsheetUtiGeoPopupDescrFontPhone");}K3.setWidth(U3);}if(G3){G3.placeAt(T3.getParameter("contentarea").id);G3.addStyleClass("sapFactsheetUtiGeoPopupText");G3.setWidth(U3);}if(L3&&L3.getContent()[0]&&L3.getContent()[0].getContent&&L3.getContent()[0].getContent().length>0){L3.placeAt(T3.getParameter("contentarea").id);L3.addStyleClass("sapFactsheetUtiGeoPopupText");L3.setWidth(U3);}if(P1.indexOf(P2.facet)>=0){P1[P1.indexOf(P2.facet)].bLoaded=true;P1[P1.indexOf(P2.facet)].bProcessed=false;P1[P1.indexOf(P2.facet)].bIsTable=false;}C2(P1.indexOf(P2.facet));};var Q3=function(T3){if(J3){J3.destroy();J3=undefined;}if(K3){K3.destroy();K3=undefined;}if(G3){G3.destroy();G3=undefined;}if(L3){L3.destroy();L3=undefined;}$(T3.getParameter("contentarea").id).empty();};var R3=function(P2){return function(a){var T3,U3,V3,W3,i;W3=a.ProjectJSON;W3=W3.indexOf("{")?W3.substr(W3.indexOf("{")):W3;T3=$.parseJSON(W3);T3.SAPVB.Scenes.Set.SceneGeo.initialStartPosition=k;T3.SAPVB.Scenes.Set.SceneGeo.initialZoom=12;T3.SAPVB.Actions.Set.Action.push({id:"200",name:"TAP_ON_MAP",refEvent:"Click",refScene:"MainScene",refVO:"Map"});if(E3){T3.SAPVB.Data=E3.Data;}for(i=0;i<T3.SAPVB.Scenes.Set.SceneGeo.VO.length;i+=1){if(T3.SAPVB.Scenes.Set.SceneGeo.VO[i].datasource==="Spots"){if(T3.SAPVB.Scenes.Set.SceneGeo.VO[i].scale&&T3.SAPVB.Scenes.Set.SceneGeo.VO[i].scale.split(";").length!==3){T3.SAPVB.Scenes.Set.SceneGeo.VO[i].scale="1.0;1.0;1.0";break;}}}P2.facet.getContent().attachSubmit(function(){if(jQuery.device.is.tablet||jQuery.device.is.phone){P2.facet.firePress();}});P2.facet.getContent().load(T3);P2.facet.attachPress("",function(){var X3=[],Y3=[],i,Z3;if(!U3){U3=new t1({width:"100%",height:"100%",plugin:false,config:null});U3.addStyleClass("sapFactsheetUtiGeoPopup");}T3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.move="false";T3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.zoom="false";T3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.pitch="false";T3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.yaw="false";T3.SAPVB.Scenes.Set.SceneGeo.SuppressedNavControlVisibility="false";U3.load(T3);if(P2.cardinality==="*"){for(i=0;i<F3.oData.results.length;i+=1){X3.push(F3.oData.results[i][b.Longitude.Path]);Y3.push(F3.oData.results[i][b.Latitude.Path]);}}U3.attachSubmit(O3);U3.attachOpenWindow(P3);U3.attachCloseWindow(Q3);V3=new s({content:U3,title:P2.facetContent.Label.String,description:Z1()});U1.removeAllFacetContent();U1.addFacetContent(V3);U1.navigateToDetail();U1.attachAfterNavigate(X3,function($3){if($3.getParameters().getParameters().toId.indexOf("-detail-page")!==-1){if(jQuery.device.is.phone){Z3="300px";}else{Z3=Math.floor($("#"+$3.getParameters().getParameters().toId+"-cont").height()-128)+"px";}U3.setHeight(Z3);if(X3.length>1){U3.zoomToGeoPosition(X3,Y3);}}});});};};var S3=function(T3){return function(){U1.removeFacet(T3);};};o.read("VBIApplicationSet('ZFACTSHEETS')","","",false,R3(P2),S3(P2.facet));}else{P2.facet.setQuantity(undefined);P2.facet.addStyleClass("sapFactsheetUtiEmptyTile");P2.facet.setHeightType(jQuery.device.is.phone?H1.Auto:H1.S);P2.facet.setContent(undefined);P2.facet.setTitle(undefined);}};};var y3=function(P2){return function(a){var b="",i,j,o,k,E3,F3,G3,H3,m,I3,J3,K3,L3,M3,N3,O3,P3,Q3,R3,S3,T3,U3,V3,W3,X3,Y3,Z3,$3,_3,a4,b4;o=new J();if(P2.facetContent.Target&&P2.facetContent.Target.AnnotationPath&&P2.facetContent.Target.AnnotationPath.split("#")[1]&&O1[P2.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+P2.facetContent.Target.AnnotationPath.split("#")[1]]){k=O1[P2.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+P2.facetContent.Target.AnnotationPath.split("#")[1]];}else{k=O1[P2.navigationType]["com.sap.vocabularies.UI.v1.Badge"];}if(P2.cardinality==="*"){if(a.results&&a.results.length){Y3=P2.facetContent.Target.AnnotationPath;v3=Y3.substring(Y3.lastIndexOf("@")+1);if(v3==="com.sap.vocabularies.UI.v1.Chart"){Z3=O1[P2.navigationType]["com.sap.vocabularies.UI.v1.Chart"];$3=O1.propertyExtensions[P2.navigationType];_3=[];for(i=0;i<Z3.Dimensions.length;i+=1){_3.push({axis:1,name:$3[Z3.Dimensions[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+Z3.Dimensions[i].PropertyPath+"}"});}a4=[];for(i=0;i<Z3.Measures.length;i+=1){a4.push({name:$3[Z3.Measures[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+Z3.Measures[i].PropertyPath+"}"});}b4=new F({dimensions:_3,measures:a4,data:{path:"/results"}});m=v2(Z3.ChartType.EnumMember,Z3.Title,Z3.Description,b4);m.setModel(o);P2.facet.setHeightType(jQuery.device.is.phone?H1.Auto:H1.XL);}else{m=new V({width:"100%"}).addStyleClass("sapFactsheetUtiVLayoutPadding");for(i=0;i<a.results.length;i+=1){G3=new u1().addStyleClass("sapFactsheetUtiHLayoutPadding");E3=m2(k.Title,P2.navigationType,K2,P2.facet);if(E3.setWrapping){E3.setWrapping(false);}sap.ui.getCore().byId(U1.getId()+"-master-page").addDelegate({onAfterShow:(function(G3){return function(){var c4,d4;c4=G3.getParent().getDomRef().clientWidth;d4=c4;if(G3.getContent()[0]){d4-=G3.getContent()[0].getDomRef().clientWidth;if(c4<G3.getContent()[0].getDomRef().clientWidth){G3.getContent()[0].getDomRef().setAttribute("style","width:"+c4+"px");return;}}if(G3.getContent()[1]){d4-=G3.getContent()[1].getDomRef().clientWidth;}if(d4<10){d4=0;}if(G3.getContent()[2]){G3.getContent()[2].getDomRef().setAttribute("style","width:"+d4+"px");}};}(G3))});o=new J();o.setData({result:a.results[i]});E3.setModel(o);E3.bindElement("/result");H3=false;if(a.results[i][k.Title.Value.Path]){H3=true;}if(k.Title.Value.Apply){for(j=0;j<k.Title.Value.Apply.Parameters.length;j+=1){if(k.Title.Value.Apply.Parameters[j].Type==="Path"){if(a.results[i][k.Title.Value.Apply.Parameters[j].Value]){H3=true;break;}}}}b="";if(H3){G3.addContent(E3);if(k.MainInfo&&((k.MainInfo.EdmType&&k.MainInfo.EdmType==="Edm.Decimal")||(k.MainInfo.Value&&k.MainInfo.Value.Apply&&k.MainInfo.Value.Apply.Parameters[0]&&k.MainInfo.Value.Apply.Parameters[0].EdmType&&k.MainInfo.Value.Apply.Parameters[0].EdmType==="Edm.Decimal"))){b="comma";}else if(k.MainInfo&&k.MainInfo.Value.Path&&a.results[i][k.MainInfo.Value.Path]){b="dash";}else if(k.MainInfo&&k.MainInfo.Value.Apply){for(j=0;j<k.MainInfo.Value.Apply.Parameters.length;j+=1){if(k.MainInfo.Value.Apply.Parameters[j].Type==="Path"){if(a.results[i][k.MainInfo.Value.Apply.Parameters[j].Value]){b="dash";break;}}}}if(b==="dash"){G3.addContent(new H({content:"<span class=\"sapFactsheetUtiSeparatorPadding sapMText\"> &ndash; </span>"}));}if(b==="comma"){G3.addContent(new h({text:", "}).addStyleClass("sapFactsheetUtiSeparatorPaddingForDecimal"));}}if(k.MainInfo){F3=m2(k.MainInfo,P2.navigationType,K2,P2.facet);if(F3.setWrapping){F3.setWrapping(false);}F3.setModel(o);F3.bindElement("/result");G3.addContent(F3);}m.addContent(G3);}}I3=parseInt(a.__count,10);if(Number(I3)){P2.facet.setQuantity(I3);}P2.facet.setContent(m);P2.facet.attachPress({facet:P2.facetContent},function(c4,d4){var m;U1.removeAllFacetContent();P1[P1.indexOf(P2.facet)].Links=[];m=s2(H2,P2.entitySet,d4.facet,P2.bindingPath,this);m.setDescription(Z1());U1.addFacetContent(m);if(P1.indexOf(P2.facet)>=0){P1[P1.indexOf(P2.facet)].bLoaded=false;P1[P1.indexOf(P2.facet)].bProcessed=false;P1[P1.indexOf(P2.facet)].bIsTable=true;}C2(P1.indexOf(P2.facet));U1.navigateToDetail();});}else{P2.facet.setQuantity(0);P2.facet.addStyleClass("sapFactsheetUtiEmptyTile");P2.facet.setHeightType(jQuery.device.is.phone?H1.Auto:H1.S);}if(P1.indexOf(P2.facet)>=0){P1[P1.indexOf(P2.facet)].bLoaded=true;P1[P1.indexOf(P2.facet)].bProcessed=false;P1[P1.indexOf(P2.facet)].bIsTable=false;}C2(P1.indexOf(P2.facet));}else{o.setData({result:a});for(W3 in a){if(a.hasOwnProperty(W3)){if(W3!=="__metadata"){if(typeof a[W3]==="string"&&a[W3]){if(parseInt(a[W3],10)!==0){X3=true;break;}}else if(typeof a[W3]==="number"&&parseInt(a[W3],10)!==0){X3=true;break;}}}}if(X3){J3=new V();K3=(O1.propertyExtensions)?O1.propertyExtensions[P2.navigationType]:[];L3=new u1().addStyleClass("sapFactsheetUtiHLayoutLabelValue");M3=n2(k.Title,{},K3,true).addStyleClass("sapFactsheetUtiLabelMargin");E3=m2(k.Title,P2.navigationType,K2,P2.facet);E3.setModel(o);E3.bindElement("/result");L3.addContent(M3);L3.addContent(E3);J3.addContent(L3);if(k.MainInfo){N3=new u1().addStyleClass("sapFactsheetUtiHLayoutLabelValue");O3=n2(k.MainInfo,{},K3,true).addStyleClass("sapFactsheetUtiLabelMargin");F3=m2(k.MainInfo,P2.navigationType,K2,P2.facet);F3.setModel(o);F3.bindElement("/result");N3.addContent(O3);N3.addContent(F3);J3.addContent(N3);}if(k.SecondaryInfo){P3=new u1().addStyleClass("sapFactsheetUtiHLayoutLabelValue");Q3=n2(k.SecondaryInfo,{},K3,true).addStyleClass("sapFactsheetUtiLabelMargin");R3=m2(k.SecondaryInfo,P2.navigationType,K2,P2.facet);R3.setModel(o);R3.bindElement("/result");P3.addContent(Q3);P3.addContent(R3);J3.addContent(P3);}if(k.TypeImageUrl||k.ImageUrl){if(k.ImageUrl){S3=k.ImageUrl;}else{S3=k.TypeImageUrl;}T3=new u1();U3="64px";if(jQuery.device.is.phone){U3="48px";}if(S3.String&&(S3.String.substr(0,11)==="sap-icon://")){V3=new v1({size:U3,width:U3});}else{V3=new f({width:U3});}V3.addStyleClass("sapFactsheetUtiRelIcon");if(S3&&S3.String){V3.setSrc(S3.String);}else if(S3&&S3.Path){V3.bindProperty("src",S3.Path);}T3.addContent(V3);T3.addContent(J3);P2.facet.setContent(T3);}else{P2.facet.setContent(J3);}P2.facet.attachPress({facet:P2.facetContent},function(c4,d4){var m;U1.removeAllFacetContent();P1[P1.indexOf(P2.facet)].Links=[];m=s2(H2,P2.entitySet,d4.facet,P2.bindingPath,this);m.setDescription(Z1());U1.addFacetContent(m);if(P1.indexOf(P2.facet)>=0){P1[P1.indexOf(P2.facet)].bLoaded=true;P1[P1.indexOf(P2.facet)].bProcessed=false;P1[P1.indexOf(P2.facet)].bIsTable=false;}C2(P1.indexOf(P2.facet));U1.navigateToDetail();});}else{P2.facet.addStyleClass("sapFactsheetUtiEmptyTile");P2.facet.setHeightType(jQuery.device.is.phone?H1.Auto:H1.S);}if(P1.indexOf(P2.facet)>=0){P1[P1.indexOf(P2.facet)].bLoaded=true;P1[P1.indexOf(P2.facet)].bProcessed=false;P1[P1.indexOf(P2.facet)].bIsTable=false;}C2(P1.indexOf(P2.facet));}};};var z3=function(P2){return function(){U1.removeFacet(P2.facet);};};var A3=function(P2){return function(a){var o,b,i,k,E3;b=O1[P2.navigationType]["com.sap.vocabularies.UI.v1.MediaResource"];if(P2.cardinality==="*"){if(a.results&&a.results.length){o=new u1().addStyleClass("sapFactsheetUtiPictureViewerOverview");for(i=0;i<a.results.length;i+=1){o.addContent(new f({src:a.results[i][b.Thumbnail.Url.Path],height:"85px"}));if(i===3){break;}}k=parseInt(a.__count,10);if(Number(k)){P2.facet.setQuantity(k);}P2.facet.setContent(o);P2.facet.attachPress({facet:P2.facetContent,data:a},function(F3,G3){var H3,w3,I3;U1.removeAllFacetContent();E3=new s();if(G3.facet.Label&&G3.facet.Label.String){E3.setTitle(G3.facet.Label.String);}E3.setDescription(Z1());if(jQuery.device.is.phone){w3="350px";}else{w3="550px";}H3=new w1({height:w3});for(i=0;i<G3.data.results.length;i+=1){I3=new f({src:G3.data.results[i][b.Url.Path]});if(jQuery.device.is.phone){I3.addStyleClass("sapFactsheetUtiCarouselMaxImageHeightPhone");}else{I3.addStyleClass("sapFactsheetUtiCarouselMaxImageHeight");}H3.addPage(I3);}E3.setContent(H3);U1.addFacetContent(E3);U1.navigateToDetail();});}else{P2.facet.setQuantity(0);P2.facet.addStyleClass("sapFactsheetUtiEmptyTile");P2.facet.setHeightType(jQuery.device.is.phone?H1.Auto:H1.S);}}};};var B3=function(o,E3){var F3=[],G3={},i,j,k,H3,I3,J3,K3,L3,M3,N3;var O3=function(K2,a){var i,b="";if(K2){if(K2.Path){return a[K2.Path];}else if(K2.String){return K2.String;}else if(K2.Apply.Name==="odata.concat"){for(i=0;i<K2.Apply.Parameters.length;i+=1){if(K2.Apply.Parameters[i].Type==="Path"){b=b+a[K2.Apply.Parameters[i].Value];}else if(K2.Apply.Parameters[i].Type==="String"){b=b+K2.Apply.Parameters[i].Value;}}return b;}}};G3.iCount=0;G3.aContacts=[];for(i=0;i<o.__batchResponses.length;i+=1){if(!o.__batchResponses[i].data){continue;}F3=o.__batchResponses[i].data.results;if(!F3){F3=[];F3.push(o.__batchResponses[i].data);}if(F3.length>0){H3=O1[F3[0].__metadata.type]["com.sap.vocabularies.Communication.v1.Contact"];if(H3){for(j=0;j<F3.length;j+=1){I3=J3=K3="";if(H3.tel){for(k=0;k<H3.tel.length;k+=1){if(H3.tel[k].type&&H3.tel[k].type.EnumMember){L3=O3(H3.tel[k].uri,F3[j]);switch(H3.tel[k].type.EnumMember){case"com.sap.vocabularies.Communication.v1.PhoneType/voice":I3=L3?L3.replace("tel:",""):"";I3=I3?I3.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/cell":J3=L3?L3.replace("tel:",""):"";J3=J3?J3.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/fax":K3=L3?L3.replace("tel:",""):"";K3=K3?K3.replace(";ext=",""):"";break;}}}}N3=H3.email&&H3.email.address?H3.email.address:"";M3=O3(H3.photo,F3[j]);G3.iCount+=1;G3.aContacts.push({fn:O3(H3.fn,F3[j]),title:O3(H3.title,F3[j]),org:O3(H3.org,F3[j]),phone:I3,mobile:J3,fax:K3,photo:M3,email:O3(N3,F3[j]),sEntity:F3[0].__metadata.type,bExistsPhoto:!!M3,bUseIcon:!M3,sOrder:G3.iCount});}}}}if(E3){G3.aContacts.sort(function(a,b){return a[E3]>b[E3]?1:-1;});}return G3;};var C3=function(){return function(o){var i,a,b,k,E3,F3,G3,H3;a=B3(o,"sOrder");b=new s1({defaultSpan:"L6 M6 S12",hSpacing:0,vSpacing:0}).addStyleClass("sapFactsheetUtiContactsGrid");for(i=0;i<a.aContacts.length&&i<4;i+=1){F3=new V();if(a.aContacts[i].photo){G3=new f({height:"55px",src:a.aContacts[i].photo});}else{G3=new v1({size:"50px",src:x1.getIconURI("person-placeholder")}).addStyleClass("sapFactsheetUtiRelIcon");}F3.addContent(G3);F3.addStyleClass("sapFactsheetUtiContactsImage");E3=new V({content:[new h({text:a.aContacts[i].fn}).addStyleClass("sapFactsheetUtiTextName"),new h({text:a.aContacts[i].title}).addStyleClass("sapFactsheetUtiTextValue")]});k=new u1({content:[F3,E3]}).addStyleClass("sapFactsheetUtiContactsBox");b.addContent(k);}n3=sap.ui.getCore().byId(U1.data("contactFacetId"));n3.setQuantity(a.iCount);if(i>0){n3.setContent(b);if(i<=2){H3=H1.M;}else{H3=H1.L;}n3.attachPress(function(){var i,n=[],e3;H2.clearBatch();for(i=0;i<O1[L2]["com.sap.vocabularies.UI.v1.Contacts"].length;i+=1){O2=O1[L2]["com.sap.vocabularies.UI.v1.Contacts"][i].AnnotationPath;O2=O2.substring(0,O2.lastIndexOf("@")-1);if(O2!==""){e3=J2+"/"+O2;}else{e3=J2;}n.push(H2.createBatchOperation(e3,"GET"));}H2.addBatchReadOperations(n);H2.submitBatch(function(o){var a,I3,J3,K3,L3,M3,N3;N3=jQuery.sap.resources({url:jQuery.sap.getModulePath("sap.ushell.components.container.")+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});a=B3(o,"sEntity");I3=new J();I3.setData(a);J3=new v({type:w.Inactive,unread:false,cells:[new V({content:[new f({src:"{photo}",width:"74px",visible:"{bExistsPhoto}"}),new v1({size:"76px",src:x1.getIconURI("person-placeholder"),visible:"{bUseIcon}"}).addStyleClass("sapFactsheetUtiRelIcon")]}),new V({content:[new h({text:"{fn}"}).addStyleClass("sapFactsheetUtiContactsName"),new r({text:"{title}"}),new r({text:"{org}"})]}),new g({text:"{phone}",href:"tel:{phone}"}),new g({text:"{mobile}",href:"tel:{mobile}"}),new g({text:"{fax}",href:"tel:{fax}"}),new g({text:"{email}",href:"mailto:{email}"})]});K3=new x({threshold:2,inset:false,showUnread:true,scrollToLoad:true,columns:[new u({hAlign:N1.Center,width:"12%",header:new h({text:""})}),new u({hAlign:N1.Begin,header:new h({text:N3.getText("USHELL_FACTSHEET_NAME")})}),new u({hAlign:N1.Begin,width:"12%",header:new h({text:N3.getText("USHELL_FACTSHEET_PHONE")}),minScreenWidth:"Tablet",demandPopin:true}),new u({hAlign:N1.Begin,width:"12%",header:new h({text:y1.i18n.getText("mobile")}),minScreenWidth:"Tablet",demandPopin:true}),new u({hAlign:N1.Begin,width:"12%",header:new h({text:y1.i18n.getText("fax")}),minScreenWidth:"Tablet",demandPopin:true}),new u({hAlign:N1.Begin,width:"26%",header:new h({text:N3.getText("USHELL_FACTSHEET_EMAIL")}),minScreenWidth:"Tablet",demandPopin:true})],items:{path:"/aContacts",template:J3}});L3=new W({sortItems:[new M({key:"fn",text:N3.getText("USHELL_FACTSHEET_NAME")}),new M({key:"phone",text:N3.getText("USHELL_FACTSHEET_PHONE")}),new M({key:"mobile",text:y1.i18n.getText("mobile")}),new M({key:"fax",text:y1.i18n.getText("fax")}),new M({key:"email",text:N3.getText("USHELL_FACTSHEET_EMAIL")})],confirm:function(O3){var P3,Q3,R3=[];P3=O3.getParameters();Q3=K3.getBinding("items");if(P3.sortItem){R3.push(new X(P3.sortItem.getKey(),P3.sortDescending));Q3.sort(R3);}}});K3.setHeaderToolbar(new Y({content:[new r(),new Z(),new _({icon:"sap-icon://drop-down-list",press:function(){L3.open();}})]}));K3.setModel(I3);M3=new s({title:n3.getTitle(),description:Z1(),content:K3});U1.removeAllFacetContent();U1.addFacetContent(M3);U1.navigateToDetail();});});}else{H3=H1.S;n3.addStyleClass("sapFactsheetUtiEmptyTile");n3.setQuantity(0);}n3.setHeightType(jQuery.device.is.phone?H1.Auto:H3);};};for(i=0;i<N2.length;i+=1){if(N2[i]["com.sap.vocabularies.UI.v1.Map"]){O2=N2[i].Target.AnnotationPath;O2=O2.substring(0,O2.lastIndexOf("@")-1);q3="1";p3=L2;if(O2){p3=i2(O2,L2,K2);q3=g2(I2,O2,K2);}w3="100%";if(jQuery.device.is.phone){w3="150px";}o3=new t1({width:"100%",height:w3,plugin:false,config:null});n3=new q1({title:N2[i].Label.String.trim(),heightType:jQuery.device.is.phone?H1.Auto:H1.L,content:o3});P1.push(n3);P1[P1.length-1].bLoaded=false;P1[P1.length-1].bProcessed=false;P1[P1.length-1].bIsTable=false;P2={cardinality:q3,navigationPath:O2,facet:n3,facetContent:N2[i],navigationType:p3,metadata:K2,bindingPath:J2,entitySet:I2};if(q3==="*"){r3=["$inlinecount=allpages","$top=1000"];}else{r3=[];}H2.read(J2+"/"+O2,"",r3,true,x3(P2));U1.addFacet(n3);}else if(N2[i].Target){O2=N2[i].Target.AnnotationPath;O2=O2.substring(0,O2.lastIndexOf("@")-1);v3=N2[i].Target.AnnotationPath.substring(N2[i].Target.AnnotationPath.lastIndexOf("@")+1);if(O2){p3=i2(O2,L2,K2);n3=new q1({title:N2[i].Label.String.trim(),heightType:jQuery.device.is.phone?H1.Auto:H1.M});q3=g2(I2,O2,K2);if(q3!==0){P2={cardinality:q3,navigationPath:O2,facet:n3,facetContent:N2[i],navigationType:p3,metadata:K2,bindingPath:J2,entitySet:I2};if(N2[i]["com.sap.vocabularies.UI.v1.Gallery"]){if(q3==="*"){r3=["$inlinecount=allpages"];}else{r3=[];}H2.read(J2+"/"+O2,"",r3,true,A3(P2));}else{P1.push(n3);P1[P1.length-1].bLoaded=false;P1[P1.length-1].bProcessed=false;P1[P1.length-1].bIsTable=false;if(q3==="*"){r3=["$inlinecount=allpages","$top=3"];}else{r3=[];}H2.read(J2+"/"+O2,"",r3,true,y3(P2),z3(P2));}U1.addFacet(n3);}}else if(v3==="com.sap.vocabularies.UI.v1.Contacts"){n3=new q1({title:N2[i].Label.String.trim(),heightType:jQuery.device.is.phone?H1.Auto:H1.M});U1.data("contactFacetId",n3.sId);P2={facet:n3};H2.clearBatch();for(j=0;j<O1[L2][v3].length;j+=1){O2=O1[L2][v3][j].AnnotationPath;O2=O2.substring(0,O2.lastIndexOf("@")-1);if(O2!==""){q3=g2(I2,O2,K2);if(q3==="*"){e3=J2+"/"+O2+"?$top=4&$inlinecount=allpages";}else{e3=J2+"/"+O2;}}else{e3=J2;}n.push(H2.createBatchOperation(e3,"GET"));}H2.addBatchReadOperations(n);H2.submitBatch(C3(P2));U1.addFacet(n3);}}}l3=new z1();var D3=function(){var b={},i,o,t3,a,k,v3,E3,F3,G3,H3,I3,J3,K3,L3;l3.setAppData({title:U1.getTitle(),subtitle:U1.getName()+" - "+U1.getDescription()});l3.setEnabled(true);J3=sap.ushell.Container.getService("URLParsing");K3=J3.getShellHash(window.location.href);L3=J3.parseShellHash(K3);G3=L3.semanticObject;T2=new A1({showCancelButton:true,placement:G1.Top});Q2=a2(e,H2);k=Q2.split(",");for(i=0;i<k.length;i+=1){k[i]=k[i].replace("='","=","g");if(k[i].lastIndexOf("'")===k[i].length-1){k[i]=k[i].slice(0,-1);}}for(v3 in O1[L2]){if(O1[L2].hasOwnProperty(v3)){if(v3.indexOf("com.sap.vocabularies.Common.v1.SecondaryKey")===0){E3=O1[L2][v3];for(i=0;i<E3.length;i+=1){F3=this.getBoundContext().getProperty(E3[i].PropertyPath);if(F3){k.push(E3[i].PropertyPath+"="+F3);}}}}}for(i=0;i<k.length;i+=1){t3=k[i].substr(0,k[i].indexOf("="));a=k[i].substr(k[i].indexOf("=")+1,k[i].length);b[decodeURIComponent(t3)]=decodeURIComponent(a);}S2=sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(G3,b);S2.done(jQuery.proxy(function(M3){var i,N3,O3;for(i=0;i<M3.length;i+=1){O3=M3[i].intent;if(O3.indexOf(S1)<0&&O3.indexOf("-analyzeKPIDetails~")<0&&O3.indexOf("-analyzeSBKPIDetails~")<0&&O3.indexOf("-NavigateToMaintainCusProj~")<0&&O3.indexOf("CostCenter-manageCostCenter~")<0&&O3.indexOf("AccountingDocument-analyzeDocumentJournal~")<0&&O3.indexOf("AccountingDocument-analyzeGLLineItem~")<0&&O3.indexOf("ControllingDocument-analyzeCostCenters~")<0&&O3.indexOf("ControllingDocument-analyzeInternalOrders~")<0&&O3.indexOf("ControllingDocument-analyzeMarketSegment~")<0&&O3.indexOf("ControllingDocument-analyzeProfitCentersActuals~")<0&&O3.indexOf("ControllingDocument-analyzeProfitLoss~")<0&&O3.indexOf("ControllingDocument-analyzeProjectsActuals~")<0&&O3.indexOf("PurchaseOrder-create~")<0){N3=sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({target:{shellHash:O3}});T2.addItem(new g({text:M3[i].text,href:N3}));U1.setTransactionsVisible(true);}}}));U1.attachTransactionsButtonPress(function(M3){T2.openBy(M3.getParameter("caller"));});this.detachChange(D3);B1.setWindowTitle(U1.getTitle().trim()+": "+U1.getName().trim()+" ("+U1.getDescription().trim()+")");U1.setActionsVisible(true);s3=new _({text:X2.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_EMAIL_LINK"),icon:"sap-icon://email",press:function(){F1.triggerEmail("",U1.getName(),window.location.href);}});U2=new C1({placement:G1.Top});H3=e.substr(0,e.lastIndexOf("/")+1);for(o in H2.oData){if(H2.oData.hasOwnProperty(o)){H3=H3+o;I3=o.substring(o.indexOf("(")+1,o.indexOf(")"));break;}}U2.addButton(new D1({jamData:{businessObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:I2,key:I3,name:U1.getTitle(),ui_url:window.location.href}}}));U2.addButton(new E1({jamData:{object:{id:window.location.href,display:new h({text:U1.getTitle()}),share:""},externalObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:I2,key:I3,name:U1.getTitle()}}}));U2.addButton(l3);U2.addButton(s3);U1.attachActionsButtonPress(function(M3){U2.openBy(M3.getParameter("caller"));});P1[0].bLoaded=true;P1[0].bProcessed=false;C2(0);};U1.getElementBinding().attachChange(D3);U1.attachBackAction(function(){history.back();});U1.addDelegate({onAfterRendering:function(){U1._adjustFacetLayout();}});return U1;};return function(a,b){try{U1=D2(a,b,new U({configurationVisible:false}));}catch(e){throw e;}return U1;};},true);
